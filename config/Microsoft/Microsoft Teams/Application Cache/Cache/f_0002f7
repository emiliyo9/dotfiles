webpackJsonp([12],{2305:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(2306),n(2310),n(2318)},2306:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2307),i=n(2309),o=function(){function e(e,t,n,r,i,o){this.loggingService=e,this.$window=t,this.constants=n,this.utilityService=r,this.desktopUtilityService=i,this.eventingService=o,this.logger=e.newLogger(n.experienceContainers.log.prefix+"ExperienceContainerFactory")}return e.$inject=["loggingService","$window","constants","utilityService","desktopUtilityService","eventingService"],e.prototype.generateContainerId=function(){return"experience-container-"+this.utilityService.generateUUID()},e.prototype.create=function(e){this.logger.log("creating experience container");var t=this.generateContainerId(),n=this.desktopUtilityService.isElectron(),o=this.loggingService.findScenario(this.constants.experienceContainers.scenarios.init),a=this.constants.experienceContainers.step.factoryCreate;return o&&o.mark(a,{isElectron:n}),this.loggingService.setContext("ecState",a),n?(this.logger.info("Creating WebView experience container: "+t,e),new i.WebViewExperienceContainer(this.loggingService,t,e,this.$window,this.constants,this.eventingService)):(this.logger.info("Creating IFrame experience container: "+t,e),new r.IframeExperienceContainer(this.loggingService,t,e,this.$window,this.constants))},e}();t.ExperienceContainerFactory=o,angular.module("teamspace.experienceContainerFactory",["teamspace.loggingService","teamspace.constants","teamspace.utilityService","teamspace.desktopUtilityService"]).service("experienceContainerFactory",o)},2307:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(57),a=function(e){function t(t,n,r,i,o){var a=e.call(this,t.newLogger(o.experienceContainers.log.prefix+"IframeExperienceContainer"),n,r,o,i)||this,u=new URL(r.url);return a.origin=u.origin,a}return r(t,e),t.prototype.createElement=function(e){var t=this,n=o.htmlFactory.createIframe(this.elementId);return n.src=e,n.setAttribute("class","embedded-electron-webview embedded-page-content"),this.$window.addEventListener("message",function(e){var r=e.source,i=e.origin,o=e.data,a=o.channel,u=o.payload;r===n.contentWindow&&i===t.origin&&a===t.constants.multiWindow.channel&&u&&t.publish(u.eventId,u.payload)}),n},t.prototype.appendTo=function(t){var n=this;return this.element?new Promise(function(r){n.updateTMPStorageSettings(),r(e.prototype.appendTo.call(n,t))}):Promise.reject("unable to mount")},t.prototype.updateTMPStorageSettings=function(){var e=JSON.parse(this.$window.localStorage.getItem("tmp.settings")),t=this.params.settings.hostSettings,n=e&&e.core||{},r=e&&e.host||{},o=t&&t.core||{};e=JSON.stringify(i({},e,{core:i({},n,o),host:i({},r,o)})),this.$window.localStorage.setItem("tmp.settings",e)},t.prototype._sendCommand=function(e){var t=i({},e,{channel:this.constants.multiWindow.channel,metaData:{destination:{channel:e.eventId}}});this.element.contentWindow.postMessage(t,this.origin)},t}(n(234).ExperienceContainer);t.IframeExperienceContainer=a},2308:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.logger=e,this.handlers=new Map}return e.prototype.publish=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.handlers.get(e)||[];this.logger.debug("Publishing event "+e+" to "+i.length+" subscribers with following args",n),i.forEach(function(e){try{e.apply(void 0,n)}catch(e){t.logger.warn("Unable to publish event to handler because it threw the following error: "+e)}})},e.prototype.addEventListener=function(e,t){var n=this.handlers.get(e)||[];n.push(t),this.handlers.set(e,n)},e.prototype.removeEventListener=function(e,t){var n=this.handlers.get(e)||[];n=n.filter(function(e){return e!==t}),this.handlers.set(e,n)},e}();t.EventPublisher=r},2309:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(20),o=n(57),a=function(e){function t(t,n,r,i,o,a){var u=e.call(this,t.newLogger(o.experienceContainers.log.prefix+"WebViewExperienceContainer"),n,r,o,i)||this;return u.eventingService=a,u}return r(t,e),t.prototype.createElement=function(e){var t=this;try{var n=o.htmlFactory.createWebView(this.elementId);return n.src=e,n.setAttribute("class","embedded-electron-webview embedded-page-content"),n.setAttribute("webpreferences","nativeWindowOpen=yes, sandbox=yes"),n.setAttribute("allowpopups",""),n.addEventListener("ipc-message",function(e){if(e.channel===t.constants.experienceContainers.channel){var n=e.args&&e.args[0];if(!n)return void t.logger.error("Invalid webview ipc-message - received no args.");if(n.requestRendererId=t.elementId,t.publish("message",n),n.eventId){if(n.eventId===i.ChildWindowEventRequest.ExperienceStarted){var r=n.payload&&n.payload.message,o=n.payload&&n.payload.errorCode;t.logger.info("ExperienceStarted:"+r+" code:"+o),o&&-1==o&&t.publish("failed-to-load-chunk",e)}t.publish(n.eventId,n.payload)}}}),n.addEventListener("crashed",function(){t.logger.error("Experience container with Id "+t.elementId+" has crashed"),t.eventingService.$emit(t.constants.events.experienceContainers.crashed,{id:t.elementId}),t.publish("crashed")}),n.addEventListener("did-fail-load",function(e){t.logger.error("Experience container with Id "+t.elementId+" failed to load. Url="+t.params.url+" Error="+e.errorDescription+" ("+e.errorCode+")"),t.publish("failed-to-load",e)}),n.addEventListener("did-navigate",function(e){var n=e.httpResponseCode,r=t.constants.responseCode;t.logger.info("Experience container with Id "+t.elementId+" did navigate with "+n+". Url="+t.params.url),-1!==n&&n!==r.ok&&t.publish("failed-to-navigate",e)}),n}catch(e){this.logger.error("Experience container with Id "+this.elementId+" loading exception: "+e);var r=this.logger.service.findScenario(this.constants.experienceContainers.scenarios.init);throw r&&r.fail({reason:this.constants.experienceContainers.reason.webViewEcCreateElementFailed}),e}},t.prototype.appendTo=function(t){var n=this;return this.element?new Promise(function(r,i){var o={enablePreload:!0,isExperienceRenderer:!0,rendererContext:JSON.stringify(n.params.settings||{})},a=n.$window.setTimeout(function(){n.logger.error("Timed out waiting for IPC response webViewCreationEnabled"),i({reason:n.constants.experienceContainers.reason.timeoutWebViewCreationEnabled})},n.constants.experienceContainers.timers.ipcWebViewCreationEnabledTimeout);n.$window.electronSafeIpc.once(n.constants.events.desktopApp.webViewCreationEnabled,function(){n.logger.info("Received webViewCreationEnabled event, Appending webview element to the page"),n.$window.clearTimeout(a),e.prototype.appendTo.call(n,t).then(r).catch(function(e){n.logger.warn("Failed to append webview element to the page: "+e),i({reason:e})})});try{n.$window.electronSafeIpc.send(n.constants.events.desktopApp.allowWebViewCreate,o)}catch(e){n.logger.error("Failed to send electronSafeIpc - elementId="+n.elementId+": "+e),i({reason:n.constants.experienceContainers.reason.ipcAllowWebViewCreateError,errorCode:e})}}):Promise.reject({reason:this.constants.experienceContainers.reason.webViewEcAppendToNoElement})},t.prototype._sendCommand=function(e){this.element.send(this.constants.experienceContainers.channel,e)},t}(n(234).ExperienceContainer);t.WebViewExperienceContainer=a},2310:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(57),a=n(2311),u=n(2312),s=n(2314),c=function(e){function t(t,n,r,o,u,c,l,f,p,h,d,g,v,y){var m=e.call(this,t)||this;return m.loggingService=n,m.experienceContainerFactory=r,m.constants=o,m.desktopUtilityService=u,m.settingsService=c,m.experienceContainerFeatureService=l,m.experienceContainerCdlCommunicator=f,m.$window=d,m.isCreatingContainer=!1,m.wrapOnReadyCallback=function(){m.isCreatingContainer=!1,m.onReadyCallback&&m.onReadyCallback()},m.onTearDown=function(e,t){m.logger.warn("Tearing down "+e.experienceContainer.elementId+" because it has "+t.reason+"."),m.settingsService.valueAsBoolean(m.constants.settings.names.enableAutoBRBforERCrashes)&&e.params&&e.params.url&&e.params.url.includes("teams.microsoft.com/")&&"crashed"===t.reason&&0===m.retryManager.recreateAttempts&&m.logger.error("MultiWindow ExperienceRenderer Crashed or Failed to Load, so triggering AutoBRB"),m.remove(e,t),m.shouldRetry(t)},m.onShouldRetry=function(e){var t=m.loggingService.findScenario(m.constants.experienceContainers.scenarios.init)||m.loggingService.newScenario(m.constants.experienceContainers.scenarios.retryInit),n=m.constants.experienceContainers.step.onTearDownRecreate;t&&t.mark(n,i({recreateAttempts:m.retryManager.recreateAttempts,reason:e.reason},e.data)),m.loggingService.setContext("ecState",n),m.initInternal(t)},m.onShouldRetryFailure=function(e,t){m.logger.info("Retry failed. We tried to retry "+m.retryManager.recreateAttempts+" times. Retry failure: "+e+". Retry reason: "+t.reason),e===s.RETRY_FAILURES.FAILED&&(m.isCreatingContainer=!1,m.markTearDownScenario(t,m.retryManager.recreateAttempts))},m.mountElement=m.createAndMountElement(),m.serviceWrapper=new a.ServiceWrapper(o,g,d,v,l,y),m.serviceWrapper.initialize(),m.logger=n.newLogger(o.experienceContainers.log.prefix+"ExperienceContainerManager"),m.retryManager=new s.ExperienceContainerRetryManager(o,n,p,h,c),m.initializeOnAppLaunchAndReinit("constructor"),d.addEventListener("unload",function(){m.cleanupOnAppTeardown("shutdown"),n.flush()}),m}return r(t,e),t.$inject=["orchestrationService","loggingService","experienceContainerFactory","constants","desktopUtilityService","settingsService","experienceContainerFeatureService","experienceContainerCdlCommunicator","appStateService","eventingService","$window","$injector","$q","$rootScope"],t.prototype.mtmaTelemetryIdentifier=function(){return"ExperienceContainerManager"},t.prototype.initializeOnAppLaunchAndReinit=function(e){var t=this.loggingService.findScenario(this.constants.experienceContainers.scenarios.init);this.initInternal(t)},t.prototype.cleanupOnAppTeardown=function(e){this.container&&this.remove(this.container,{reason:e}),this.markTearDownScenario({reason:e},this.retryManager.recreateAttempts),this.container=void 0,this.retryManager.reset(),"shutdown"===e&&(this.onReadyCallback=void 0),this.isCreatingContainer=!1},t.prototype.reload=function(){this.cleanupOnAppTeardown("reloaded");var e=this.loggingService.findScenario(this.constants.experienceContainers.scenarios.init)||this.loggingService.newScenario(this.constants.experienceContainers.scenarios.retryInit);this.initInternal(e)},Object.defineProperty(t.prototype,"isReady",{get:function(){var e=this.getContainerEntry();return!(!e||!e.isReady)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"retryState",{get:function(){return this.retryManager.retryState},enumerable:!0,configurable:!0}),t.prototype.onReady=function(e){this.onReadyCallback=e;var t=this.getContainerEntry();t?t.onReady(this.wrapOnReadyCallback):this.logger.warn("Registration for onReady callback arrived when container entry is undefined")},t.prototype.nudge=function(){if(this.logger.info("Received a nudge to recreate the experience container"),this.isCreatingContainer)this.logger.info("Ignoring nudge request as we are already creating a container.");else{var e=this.getContainerEntry();e||(this.retryManager.reset(),this.shouldRetry({reason:"nudge"})),(e=this.getContainerEntry())||this.logger.error("The nudge attempt failed to recreate the experience container.")}},t.prototype.collectLogs=function(){var e=this.getContainerEntry();return e?e.collectLogs():Promise.resolve([])},t.prototype.collectLeaks=function(){var e=this.getContainerEntry();return e?e.collectLeaks():Promise.resolve({})},t.prototype.shouldShowChatNotification=function(e){var t=this.getContainerEntry();return t?t.shouldShowChatNotification(e):Promise.resolve({shouldShowChatNotification:!0,windowId:void 0})},t.prototype.initInternal=function(e){if(this.isEnabled())try{this.isCreatingContainer=!0;var t=this.settingsService.valueAsObject(this.constants.settings.names.experienceContainerUrl).url;this.logger.info("Registering experience container with URL: {0}",t),this.register(this.prepareContainerUrl(t));var n=this.constants.experienceContainers.step.appLaunchRegister;e&&e.mark(n,{reason:t}),this.loggingService.setContext("ecState",n)}catch(t){this.logger.error("Failed to initialize container",t);r=this.constants.experienceContainers.reason.appLaunchFailed;e&&e.fail({reason:r}),this.loggingService.setContext("ecState",r),this.isCreatingContainer=!1}else{var r=this.constants.experienceContainers.reason.notEnabledDuringAppLaunch;e&&e.fail({reason:r}),this.loggingService.setContext("ecState",r)}},t.prototype.isEnabled=function(){return this.experienceContainerFeatureService.isExperienceContainerSupportEnabled()},t.prototype.prepareContainerUrl=function(e){var t=this.desktopUtilityService.isElectron()?"electron":"web",n=new URL(e);n.searchParams.append("agent",t);var r=this.$window.desktopSettings&&this.$window.desktopSettings.experienceRendererBuildContainer;return r?n.searchParams.append("container",r):n.searchParams.append("version",this.getVersion()),n.href},t.prototype.getDefaultContainerSettings=function(e){return{windowId:"northstarCore",hostSettings:this.serviceWrapper.getHostSettings({timeOpened:Date.now(),content:{id:e,metaData:{}}}),perfMarkers:{windowCreateTimeFromMainRenderer:Date.now()},loadUrl:e}},t.prototype.getVersion=function(){return this.settingsService.getOrbitalVersion(this.constants.settings.orbitals.multiWindow)},t.prototype.register=function(e){try{var t={url:e,settings:this.getDefaultContainerSettings(e)};this.container=this.createContainerEntry(t),this.logger.info("Adding EC '"+this.container.experienceContainer.elementId+"'"),this.container.outerWrap&&this.mountElement.appendChild(this.container.outerWrap),this.container.onReady(this.wrapOnReadyCallback)}catch(t){throw this.logger.error("Failed to create container entry",t,e),t}},t.prototype.getContainerEntry=function(){return this.isEnabled()&&this.container},t.prototype.get=function(){var e=this.getContainerEntry();return e&&e.experienceContainer},t.prototype.getUiHandle=function(){var e=this.getContainerEntry();return e&&e.outerWrap},t.prototype.createContainerEntry=function(e){return this.markCreateNewScenario(),new u.ContainerEntry(e,this.experienceContainerFactory,this.loggingService,this.serviceWrapper,this.experienceContainerCdlCommunicator,this.onTearDown,this.constants,this.$window,this.logger,this.settingsService)},t.prototype.remove=function(e,t){this.logger.info("Removing EC '"+e.experienceContainer.elementId+"' with reason='"+t.reason+"'"),e.outerWrap&&this.mountElement.removeChild(e.outerWrap),this.experienceContainerCdlCommunicator&&this.experienceContainerCdlCommunicator.teardown(e.experienceContainer.elementId),this.container=void 0},t.prototype.shouldRetry=function(e){var t=this;this.retryManager.shouldRetry(e).then(function(){return t.onShouldRetry(e)}).catch(function(n){return t.onShouldRetryFailure(n,e)})},t.prototype.markCreateNewScenario=function(){var e=this.constants.experienceContainers.scenarios.createNew;this.loggingService.newScenario(e).stop()},t.prototype.markTearDownScenario=function(e,t){var n=e.data,r=e.reason,o=this.loggingService.findScenario(this.constants.experienceContainers.scenarios.init)||this.loggingService.findScenario(this.constants.experienceContainers.scenarios.retryInit)||this.loggingService.newScenario(this.constants.experienceContainers.scenarios.tearDown);u.isTearDownDueToFailure(e)?o&&o.fail(i({reason:r,errorCode:r,retryAttempt:t},n)):o&&o.stop(i({reason:r,retryAttempt:t},n)),this.loggingService.setContext("ecState",r)},t.prototype.createAndMountElement=function(){var e=o.htmlFactory.createDiv("ExperienceContainerManagerMountElement");return e.setAttribute("class","experience-container-root"),document.body.appendChild(e),e},t}(teamspace.services.MTMABase);t.ExperienceContainerManager=c,angular.module("teamspace.experienceContainerManager",["teamspace.orchestrationService","teamspace.loggingService","teamspace.experienceContainerFactory","teamspace.constants","teamspace.desktopUtilityService","teamspace.settingsService","teamspace.experienceContainerFeatureService","teamspace.experienceContainerCdlCommunicator","teamspace.appState","teamspace.eventingService"]).service("experienceContainerManager",c)},2311:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,n,r,i,o,a){var u=e.call(this,t,n,r,i,a)||this;return u.experienceContainerFeatureService=o,u}return r(t,e),t.prototype.getHostSettings=function(t){var n={core:{enableMultiWindowV2:this.experienceContainerFeatureService.isExperienceContainerSupportEnabled()}},r=e.prototype.getHostSettings.call(this,t);try{r.default=i({},r.default)}catch(e){}return i({},r,n)},t}(n(225).AngularServiceWrapper);t.ServiceWrapper=o},2312:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(20),i=n(2313),o=n(57);t.isTearDownDueToFailure=function(e){var t=e.reason;return["crashed","failed-to-load","failed-to-load-chunk","failed-to-navigate","core-init-failed","no-skype-id"].some(function(e){return e===t})};var a=function(){function e(e,t,n,a,u,s,c,l,f,p){var h=this;this.params=e,this.experienceContainerFactory=t,this.loggingService=n,this.serviceWrapper=a,this.cdlCommunicator=u,this.onTearDownCallback=s,this.constants=c,this.$window=l,this.logger=f,this.settingsService=p,this.onTearDown=function(e,t){h._isReady=!1,h.tearDownListeners(),h.shellCommWrapper.tearDown(),h.stopCoreInitializedTimer(),h.onTearDownCallback(h,{data:t,reason:e})},this.onCrashed=function(){return h.onTearDown("crashed")},this.onFailedToLoad=function(e){return h.onTearDown("failed-to-load",e&&{errorDescription:e.errorDescription,statusCode:e.errorCode})},this.onFailedToLoadChunk=function(e){var t=e&&e.args&&e.args[0];return h.onTearDown("failed-to-load-chunk",t&&{errorDescription:t.payload&&t.payload.errorDescription})},this.onFailedToNavigate=function(e){return h.onTearDown("failed-to-navigate",e&&{statusCode:e.httpResponseCode})},this.onReloaded=function(){return h.onTearDown("reloaded")},this.onCdlRequest=function(e){h.cdlCommunicator?e?(h.experienceContainer&&(e.dataLayer.rendererId=h.experienceContainer.elementId),h.cdlCommunicator.sendDataLayerRequest(e,h.experienceContainer.sendCommand)):h.logger.error("Error in processing data layer request: Data layer request is undefined."):h.logger.error("Error in processing data layer request: Cdl communicator is unavailable.")},this.startCoreInitializedTimer=function(e){if(!e)return function(){};var t=h.constants.experienceContainers.timers.coreInitializedTimeout,n=h.$window.setTimeout(function(){h.onTearDown("core-not-initialized")},t);return function(){h.$window.clearTimeout(n)}},this.onCoreInitialized=function(){h.logger.info("Experience Container Core Initialized");var e=h.logger.service.findScenario(h.constants.experienceContainers.scenarios.init)||h.logger.service.findScenario(h.constants.experienceContainers.scenarios.retryInit),t=r.ChildWindowEventRequest.CoreInitialized;e?e.stop({reason:t}):h.logger.service.newScenario(h.constants.experienceContainers.scenarios.coreInitializedMiss).stop(),h.loggingService.setContext("ecState",t),h.stopCoreInitializedTimer(),h._isReady=!0,h.onReadyCallback?h.onReadyCallback():h.logger.error("onReady callback is not registered to the container entry")},this.onCoreInitializationFailed=function(e){h.onTearDown("core-init-failed",e&&{errorDescription:e&&e.errorDescription})},this._isReady=!1;var d=t.create(e);if(this.experienceContainer=d,!this.hasInvalidUserId(e)){this.setupListeners(),this.outerWrap=o.htmlFactory.createDiv("ExperienceContainerWrap-"+d.elementId),this.shellCommWrapper=new i.ShellCommWrapper(d,n,a,p,c),this.outerWrap.setAttribute("class","hidden");var g=n.findScenario(c.experienceContainers.scenarios.init);this.stopCoreInitializedTimer=this.startCoreInitializedTimer(g),d.appendTo(this.outerWrap).then(function(){var e=c.experienceContainers.step.constructContainerEntry;g&&g.mark(e),n.setContext("ecState",e)}).catch(function(e){f.error("Failed to append experience container "+d.elementId+" to wrapper: "+e);var t=e&&e.reason||c.experienceContainers.reason.constructContainerEntryFailed;g&&g.fail({reason:t,errorCode:e&&e.errorCode}),n.setContext("ecState",t)})}}return Object.defineProperty(e.prototype,"isReady",{get:function(){return this._isReady},enumerable:!0,configurable:!0}),e.prototype.onReady=function(e){this.onReadyCallback=e},e.prototype.collectLogs=function(){var e=this;return new Promise(function(t,n){var i=e.constants.timeInMiliseconds.second,o=r.ChildWindowEventRequest.GetLogs,a={eventId:o},u=0,s=function(n){e.experienceContainer.removeEventListener(o,s),e.$window.clearTimeout(u),t(n&&n.logs||[])};u=e.$window.setTimeout(function(){var t="Request to gather logs from experience container timed out after "+i+" milli seconds.";e.logger.error(t),e.experienceContainer.removeEventListener(o,s),n(t)},i),e.experienceContainer.addEventListener(o,s),e.experienceContainer.sendCommand(a)})},e.prototype.collectLeaks=function(){var e=this;return new Promise(function(t,n){var i=15*e.constants.timeInMiliseconds.second,o=r.ChildWindowEventRequest.GetLeaks,a=0,u=function(n){e.experienceContainer.removeEventListener(o,u),e.$window.clearTimeout(a),t(n&&n.leaks||{})};a=e.$window.setTimeout(function(){var t="Request to gather leaks from experience container timed out after "+i+" milliseconds.";e.logger.error(t),e.experienceContainer.removeEventListener(o,u),n(t)},i),e.experienceContainer.addEventListener(o,u),e.experienceContainer.sendCommand({eventId:o})})},e.prototype.shouldShowChatNotification=function(e){var t=this;return new Promise(function(n,i){var o=t.logger.service.newScenario(t.constants.containerEntry.scenarios.shouldShowChatNotification);try{var a=t.constants.timeInMiliseconds.second,u=r.ChildWindowEventRequest.ShouldShowChatNotification,s={eventId:u,payload:{convId:e}},c=0,l=function(e){if(t.experienceContainer.removeEventListener(u,l),t.$window.clearTimeout(c),e&&e.hasOwnProperty("shouldShowChatNotification"))return o.stop(),n(e);t.logger.error("Response for shouldShowChatNotification is malformed "+JSON.stringify(e)),o.fail({reason:"invalidResponse"}),n({shouldShowChatNotification:!0,windowId:void 0})};c=t.$window.setTimeout(function(){var e="Request for shouldShowChatNotification timed out after "+a+" milli seconds.";t.logger.error(e),t.experienceContainer.removeEventListener(u,l),o.cancel(),n({shouldShowChatNotification:!0,windowId:void 0})},a),t.experienceContainer.addEventListener(u,l),t.experienceContainer.sendCommand(s)}catch(e){var f=t.getErrorString(e);o.fail({reason:"exception",errorMessage:f,errorCode:e&&e.errorCode,errorReason:e&&e.reason}),n({shouldShowChatNotification:!0,windowId:void 0})}})},e.prototype.hasInvalidUserId=function(e){var t=this,n=!(e&&e.settings&&e.settings.hostSettings&&e.settings.hostSettings.bootstrapData&&e.settings.hostSettings.bootstrapData.userId&&"8:undefined"!==e.settings.hostSettings.bootstrapData.userId);return n&&setTimeout(function(){return t.onTearDownCallback(t,{reason:"no-skype-id"})},0),n},e.prototype.getErrorString=function(e){var t=this.settingsService.getRing();return t&&"ring0"===t.id?JSON.stringify(e):void 0},e.prototype.setupListeners=function(){this.experienceContainer.addEventListener("crashed",this.onCrashed),this.experienceContainer.addEventListener("failed-to-load",this.onFailedToLoad),this.experienceContainer.addEventListener("failed-to-load-chunk",this.onFailedToLoadChunk),this.experienceContainer.addEventListener("failed-to-navigate",this.onFailedToNavigate),this.experienceContainer.addEventListener(r.ChildWindowEventRequest.WindowUnloaded,this.onReloaded),this.experienceContainer.addEventListener(r.ChildWindowEventRequest.CentralDataLayerRequest,this.onCdlRequest),this.experienceContainer.addEventListener(r.ChildWindowEventRequest.CoreInitialized,this.onCoreInitialized),this.experienceContainer.addEventListener(r.ChildWindowEventRequest.CoreInitializationFailed,this.onCoreInitializationFailed)},e.prototype.tearDownListeners=function(){this.experienceContainer.removeEventListener("crashed",this.onCrashed),this.experienceContainer.removeEventListener("failed-to-load",this.onFailedToLoad),this.experienceContainer.removeEventListener("failed-to-load-chunk",this.onFailedToLoadChunk),this.experienceContainer.removeEventListener("failed-to-navigate",this.onFailedToNavigate),this.experienceContainer.removeEventListener(r.ChildWindowEventRequest.WindowUnloaded,this.onReloaded),this.experienceContainer.removeEventListener(r.ChildWindowEventRequest.CentralDataLayerRequest,this.onCdlRequest),this.experienceContainer.removeEventListener(r.ChildWindowEventRequest.CoreInitialized,this.onCoreInitialized),this.experienceContainer.removeEventListener(r.ChildWindowEventRequest.CoreInitializationFailed,this.onCoreInitializationFailed)},e}();t.ContainerEntry=a},2313:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(20),o=teamspace.services.ApplicationState,a=teamspace.services.UtilityServiceStatics.safeJsonStringify,u=function(){function e(e,t,n,r,o){var a=this;this.experienceContainer=e,this.serviceWrapper=n,this.settingsService=r,this.constants=o,this.messageHandler=function(e){var t=function(e){return a.experienceContainer.sendCommand(e)};switch(e.eventId){case i.ChildWindowEventRequest.AadGetToken:a.handleAadGetToken(e,t);break;case i.ChildWindowEventRequest.AadGetCurrentUser:a.handleAadGetCurrentUser(e,t);break;case i.ChildWindowEventRequest.GetStateData:a.handleGetStateData(e,t);break;case i.ChildWindowEventRequest.RequestShellToOpen:a.handleRequestShellToOpen(e,t);break;case i.ChildWindowEventRequest.UpdateWindowState:a.handleUpdateWindowState(e);break;case i.ChildWindowEventRequest.ScreenSharingControlMessage:a.handleScreenSharingControlMessage(e);break;case i.ChildWindowEventRequest.GetAggregatedSettings:a.handleGetAggregatedSettings(e,t);break;case i.ChildWindowEventRequest.CommandEvent:a.handleCommandEvent(e,t);break;case i.ChildWindowEventRequest.LayoutChangeMessage:a.handleLayoutChangeMessage(e);break;case i.ChildWindowEventRequest.TriggerAutoBrb:a.handleAutoBrb(e);break;case i.ChildWindowEventRequest.WindowCrashed:case"windowErrored":a.handleWindowErrored(e)}},e.addEventListener("message",this.messageHandler),this.logger=t.newLogger(o.experienceContainers.log.prefix+"ShellCommWrapper")}return e.prototype.tearDown=function(){this.experienceContainer.removeEventListener("message",this.messageHandler)},e.prototype.createScenarioForAuth=function(e){var t=this.logger.service.findScenario(this.constants.experienceContainers.scenarios.ipcMessageListener);!t&&this.settingsService.valueFor(this.constants.settings.names.enableIPCMessageScenarioLogInShellComm)&&(t=this.logger.service.newScenario(this.constants.experienceContainers.scenarios.ipcMessageListener)),this.logger.info("message recieved eventId: '["+e.eventId+"], correaltionId: ["+e.correlationId+"]', payload:["+e.payload+"]"),t&&t.appendEventData({correlationId:e.correlationId,payload:a(e.payload),eventId:e.eventId})},e.prototype.handleAutoBrb=function(e){var t=e.payload;t&&t.title?this.serviceWrapper.triggerAutoBrb(t.title):this.logger.warn("handleAutoBrb called without valid payload "+a(t))},e.prototype.handleCommandEvent=function(e,t){var n=e.payload;n&&n.entityCommand&&n.commandEvent?n.entityCommand.entity&&n.entityCommand.command?(this.logger.info("CommandEvent, Payload: "+JSON.stringify({commandEvent:n.commandEvent,entityCommand:n.entityCommand,isCommandTargetedToMainWindow:n.isCommandTargetedToMainWindow})),n.commandEvent===i.CommandEvent.NotHandled?this.serviceWrapper.navigateMainWindowWithEntityCommand(n.entityCommand,t):n.commandEvent===i.CommandEvent.WindowUpdated&&n.isCommandTargetedToMainWindow&&this.serviceWrapper.navigateHybridContentRoute(n.entityCommand)):this.logger.warn("handleCommandEvent Called without a valid payload command, payload: "+JSON.stringify(n)):this.logger.warn("handleCommandEvent Called without a valid payload: "+JSON.stringify(n))},e.prototype.handleGetAggregatedSettings=function(e,t){var n=this;this.serviceWrapper.getAggregatedSettings().then(function(t){return n.buildResponse(e,{data:t})}).then(t).catch(function(e){return n.logger.error("Failed to handle getAggregatedSettings",e)})},e.prototype.handleAadGetToken=function(e,t){var n=this;this.createScenarioForAuth(e),this.serviceWrapper.getAadToken(e.payload.resource,e.payload.claim?e.payload.claim:void 0,e.payload&&e.payload.timeout).then(function(t){return n.buildResponse(e,{token:t})}).then(t).catch(function(r){n.logger.error("Failed to handle AAD token",r),t(n.buildErrorResponse(e,r))})},e.prototype.handleAadGetCurrentUser=function(e,t){var n=this;this.createScenarioForAuth(e),this.serviceWrapper.getAuthUser(e.payload&&e.payload.timeout).then(function(t){return n.buildResponse(e,{authUser:t})}).then(t).catch(function(r){n.logger.error("Failed to handle AadGetCurrentUser",r),t(n.buildErrorResponse(e,r))})},e.prototype.handleGetStateData=function(e,t){var n=this;this.createScenarioForAuth(e);var r;switch(e.payload.requestType){case"skypeToken":r=this.serviceWrapper.getSkypeToken(e.payload&&e.payload.timeout).then(function(e){return{skypeTokenData:e}});break;case"hostSettings":r=Promise.resolve({hostSettings:this.serviceWrapper.getHostSettings({})})}r.then(function(t){return n.buildResponse(e,t)}).then(t).catch(function(r){n.logger.error("Failed to handle GetStateData",r),t(n.buildErrorResponse(e,r))})},e.prototype.handleRequestShellToOpen=function(e,t){var n=this;if(e){var r=void 0,i=e.payload.openType,o=e.payload.openHandler,a=e.payload.handlerParams;if(i&&o)switch(i){case teamspace.services.OpenType.OpenOnMainRenderer:r=Promise.resolve({opened:this.serviceWrapper.navigateMainWindow(o,a)})}r.then(function(t){return n.buildResponse(e,t)}).then(t).catch(function(e){return n.logger.error("Failed to handle RequestShellToOpen",e)})}},e.prototype.handleScreenSharingControlMessage=function(e){e&&e.payload&&this.serviceWrapper.sendScreenSharingControlMessage(e.payload)},e.prototype.handleUpdateWindowState=function(e){if(e&&e.payload&&e.payload.childSettings&&e.payload.childSettings.appState){var t=e.payload.childSettings.appState;t!==o.Interactive&&t!==o.InCall||this.serviceWrapper.emitMessage("IdleEnd")}},e.prototype.handleLayoutChangeMessage=function(e){e&&e.payload&&e.payload.layoutChange&&this.serviceWrapper.triggerLayoutChange(e.payload.layoutChange)},e.prototype.handleWindowErrored=function(e){var t=this,n=e.payload||{},r=n.errorMsg;if(n.showOops){var i=n.logs&&Array.isArray(n.logs)&&n.logs.length>0,o=i?"\nLogs emitted for a child window error:\n":"";this.logger.warn("Child window has hit an unrecovered errored state: errorMsg="+r+", errorCode="+n.errorCode+"."+o),n.errorStack&&this.logger.warn("Error Stack: "+n.errorStack),i&&n.logs.forEach(function(e){t.logger.warn(e.timeStamp+" "+e.levelName+" - "+e.message)})}},e.prototype.buildResponse=function(e,t){var n=this.logger.service.findScenario(this.constants.experienceContainers.scenarios.ipcMessageListener);return n&&n.stop({"EventInfo.CorrelationId":e.correlationId}),this.logger.info("buildResponse for eventId:'["+e.eventId+"]', correlationId:'["+e.correlationId+"]'"),r({},e,{payload:t||{}})},e.prototype.buildErrorResponse=function(e,t){var n=this.logger.service.findScenario(this.constants.experienceContainers.scenarios.ipcMessageListener);return n&&n.fail({"EventInfo.CorrelationId":e.correlationId,message:t.messsage,eventId:e.eventId}),this.logger.info("buildErrorResponse for eventId:'["+e.eventId+"]', correlationId:'["+e.correlationId+"]'"),r({},e,{error:t})},e}();t.ShellCommWrapper=u},2314:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{s(r.next(e))}catch(e){o(e)}}function u(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,u)}s((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=2&n[0]?o.return:n[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,o=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){s=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){s.label=n[1];break}if(6===n[0]&&s.label<a[1]){s.label=a[1],a=n;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(n);break}a[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(e){n=[6,e],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,u,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return u={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u};Object.defineProperty(t,"__esModule",{value:!0});var o,a=n(20),u=n(2315),s=n(2316);!function(e){e.IGNORED="retry_ignored",e.CANCELED="retry_canceled",e.FAILED="retry_failed"}(o=t.RETRY_FAILURES||(t.RETRY_FAILURES={}));var c=function(){function e(e,t,n,r,i){var o=this;this.constants=e,this.loggingService=t,this.appStateService=n,this.eventingService=r,this.retries=0,this.lastRetriedTimestamp=0,this.isRetrying=!1,this._retryState=a.RetryState.NotRetried,this.retryStrategy=null,this.logger=null,this.resetInternal=function(){o.logger.info("Resetting the retry manager counters on tear down."),o.lastRetriedTimestamp=0,o.resetRetries(),o._retryState=a.RetryState.NotRetried},this.resetRetries=function(){o.logger.info("Resetting the retry count to 0."),o.retries=0},this.logger=t.newLogger(e.experienceContainers.log.prefix+"ExperienceContainerRetryManager");var c=i.valueFor(e.settings.names.experienceContainerRetryConfig);if(i.valueAsBoolean(e.settings.names.enableMultiWindowContainerRetry)){this.logger.info('Using "getLinearNetworkErrorRetry" strategy');var l=c&&c.strategies&&c.strategies.linearNetworkErrorRetry;this.retryStrategy=s.getLinearNetworkErrorRetry(l)}var f=c&&c.strategies&&c.strategies.defaultRetryStrategy;this.retryStrategy=this.retryStrategy||s.getDefaultRetryStrategy(f),this.resetRetriesOnce=u.once(this.resetRetries)}return e.prototype.shouldRetry=function(e){return r(this,void 0,void 0,function(){var t,n,r,u,s,c,l,f;return i(this,function(i){switch(i.label){case 0:if(t=Date.now()-this.lastRetriedTimestamp,n=this.loggingService.newScenario(this.constants.experienceContainers.scenarios.retry),this.logger.info("New retry request. Reason: "+e.reason),this.isRetrying&&"nudge"===e.reason)return n.stop({reason:e.reason}),this.logger.info("Retrying due to a nudge request."),this.updateRetryCounters(),this.resetRetries(),this._retryState=a.RetryState.RetryTriggered,[2];if(this.isRetrying)throw n.stop({reason:o.IGNORED}),this.logger.info("Retry was ignored"),o.IGNORED;this.isRetrying=!0,r=0,u=this.retryStrategy.conditions,i.label=1;case 1:return r<u.length?(s=u[r],this._retryState="shouldRetryOnNetworkError"===s.name?a.RetryState.WaitingForNetwork:a.RetryState.WaitingForCondition,[4,s({event:e,timeElapsed:t,resetRetriesOnce:this.resetRetriesOnce,appStateService:this.appStateService,logger:this.logger,eventingService:this.eventingService,constants:this.constants,timeoutBetweenRetries:this.retryStrategy.timeoutBetweenRetries,recreateTimeout:this.retryStrategy.recreateTimeout,scenario:n,maxRecreateAttempts:this.retryStrategy.maxRecreateAttempts,retries:this.retries})]):[3,4];case 2:if(c=i.sent(),l=c.shouldRetry,f=c.resetRetryCountAfterRetry,l&&!this.isRetrying)throw n.stop({reason:o.CANCELED}),this.logger.info("Retry was canceled"),o.CANCELED;if(l&&this.isRetrying)return n.stop({reason:s.name}),this.logger.info("Retry succeeded. Retry condition: "+s.name),this.updateRetryCounters(),f&&this.resetRetries(),this._retryState=a.RetryState.RetryTriggered,[2];i.label=3;case 3:return r++,[3,1];case 4:throw n.fail({reason:o.FAILED}),this.isRetrying=!1,this.logger.error("Maximum retries hit. Not attempting to recreate the experience container."),this._retryState=a.RetryState.RetryFailed,o.FAILED}})})},e.prototype.reset=function(){this.resetInternal(),this.resetRetriesOnce=u.once(this.resetRetries)},Object.defineProperty(e.prototype,"recreateAttempts",{get:function(){return this.retries},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"retryState",{get:function(){return this._retryState},enumerable:!0,configurable:!0}),e.prototype.updateRetryCounters=function(){this.lastRetriedTimestamp=Date.now(),this.retries++,this.isRetrying=!1},e}();t.ExperienceContainerRetryManager=c},2315:function(e,t,n){(function(e,r){var i;(function(){function o(e,t){return e.set(t[0],t[1]),e}function a(e,t){return e.add(t),e}function u(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function s(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function c(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function l(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function f(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function p(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function h(e,t){return!!(null==e?0:e.length)&&S(e,t,0)>-1}function d(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function g(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function v(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function y(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function m(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function _(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function w(e){return e.split("")}function C(e){return e.match(Nt)||[]}function b(e,t,n){var r;return n(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function x(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function S(e,t,n){return t===t?Y(e,t,n):x(e,R,n)}function E(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function R(e){return e!==e}function I(e,t){var n=null==e?0:e.length;return n?L(e,t)/n:Me}function A(e){return function(t){return null==t?ie:t[e]}}function O(e){return function(t){return null==e?ie:e[t]}}function k(e,t,n,r,i){return i(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}function T(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function L(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);o!==ie&&(n=n===ie?o:n+o)}return n}function W(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function j(e,t){return g(t,function(t){return[t,e[t]]})}function M(e){return function(t){return e(t)}}function z(e,t){return g(t,function(t){return e[t]})}function D(e,t){return e.has(t)}function F(e,t){for(var n=-1,r=e.length;++n<r&&S(t,e[n],0)>-1;);return n}function P(e,t){for(var n=e.length;n--&&S(t,e[n],0)>-1;);return n}function N(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}function U(e){return"\\"+In[e]}function q(e,t){return null==e?ie:e[t]}function $(e){return mn.test(e)}function B(e){return _n.test(e)}function H(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function V(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function G(e,t){return function(n){return e(t(n))}}function J(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];a!==t&&a!==le||(e[n]=le,o[i++]=n)}return o}function Z(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function K(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function Y(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function Q(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}function X(e){return $(e)?te(e):Bn(e)}function ee(e){return $(e)?ne(e):w(e)}function te(e){for(var t=vn.lastIndex=0;vn.test(e);)++t;return t}function ne(e){return e.match(vn)||[]}function re(e){return e.match(yn)||[]}var ie,oe=200,ae="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",ue="Expected a function",se="__lodash_hash_undefined__",ce=500,le="__lodash_placeholder__",fe=1,pe=2,he=4,de=1,ge=2,ve=1,ye=2,me=4,_e=8,we=16,Ce=32,be=64,xe=128,Se=256,Ee=512,Re=30,Ie="...",Ae=800,Oe=16,ke=1,Te=2,Le=1/0,We=9007199254740991,je=1.7976931348623157e308,Me=NaN,ze=4294967295,De=ze-1,Fe=ze>>>1,Pe=[["ary",xe],["bind",ve],["bindKey",ye],["curry",_e],["curryRight",we],["flip",Ee],["partial",Ce],["partialRight",be],["rearg",Se]],Ne="[object Arguments]",Ue="[object Array]",qe="[object AsyncFunction]",$e="[object Boolean]",Be="[object Date]",He="[object DOMException]",Ve="[object Error]",Ge="[object Function]",Je="[object GeneratorFunction]",Ze="[object Map]",Ke="[object Number]",Ye="[object Null]",Qe="[object Object]",Xe="[object Proxy]",et="[object RegExp]",tt="[object Set]",nt="[object String]",rt="[object Symbol]",it="[object Undefined]",ot="[object WeakMap]",at="[object WeakSet]",ut="[object ArrayBuffer]",st="[object DataView]",ct="[object Float32Array]",lt="[object Float64Array]",ft="[object Int8Array]",pt="[object Int16Array]",ht="[object Int32Array]",dt="[object Uint8Array]",gt="[object Uint8ClampedArray]",vt="[object Uint16Array]",yt="[object Uint32Array]",mt=/\b__p \+= '';/g,_t=/\b(__p \+=) '' \+/g,wt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ct=/&(?:amp|lt|gt|quot|#39);/g,bt=/[&<>"']/g,xt=RegExp(Ct.source),St=RegExp(bt.source),Et=/<%-([\s\S]+?)%>/g,Rt=/<%([\s\S]+?)%>/g,It=/<%=([\s\S]+?)%>/g,At=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ot=/^\w*$/,kt=/^\./,Tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Lt=/[\\^$.*+?()[\]{}|]/g,Wt=RegExp(Lt.source),jt=/^\s+|\s+$/g,Mt=/^\s+/,zt=/\s+$/,Dt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ft=/\{\n\/\* \[wrapped with (.+)\] \*/,Pt=/,? & /,Nt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ut=/\\(\\)?/g,qt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,$t=/\w*$/,Bt=/^[-+]0x[0-9a-f]+$/i,Ht=/^0b[01]+$/i,Vt=/^\[object .+?Constructor\]$/,Gt=/^0o[0-7]+$/i,Jt=/^(?:0|[1-9]\d*)$/,Zt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Kt=/($^)/,Yt=/['\n\r\u2028\u2029\\]/g,Qt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Xt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",en="["+Xt+"]",tn="["+Qt+"]",nn="[a-z\\xdf-\\xf6\\xf8-\\xff]",rn="[^\\ud800-\\udfff"+Xt+"\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",on="\\ud83c[\\udffb-\\udfff]",an="(?:\\ud83c[\\udde6-\\uddff]){2}",un="[\\ud800-\\udbff][\\udc00-\\udfff]",sn="[A-Z\\xc0-\\xd6\\xd8-\\xde]",cn="(?:"+nn+"|"+rn+")",ln="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",fn="[\\ufe0e\\ufe0f]?"+ln+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",an,un].join("|")+")[\\ufe0e\\ufe0f]?"+ln+")*"),pn="(?:"+["[\\u2700-\\u27bf]",an,un].join("|")+")"+fn,hn="(?:"+["[^\\ud800-\\udfff]"+tn+"?",tn,an,un,"[\\ud800-\\udfff]"].join("|")+")",dn=RegExp("['’]","g"),gn=RegExp(tn,"g"),vn=RegExp(on+"(?="+on+")|"+hn+fn,"g"),yn=RegExp([sn+"?"+nn+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[en,sn,"$"].join("|")+")","(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[en,sn+cn,"$"].join("|")+")",sn+"?"+cn+"+(?:['’](?:d|ll|m|re|s|t|ve))?",sn+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)","\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)","\\d+",pn].join("|"),"g"),mn=RegExp("[\\u200d\\ud800-\\udfff"+Qt+"\\ufe0e\\ufe0f]"),_n=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,wn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Cn=-1,bn={};bn[ct]=bn[lt]=bn[ft]=bn[pt]=bn[ht]=bn[dt]=bn[gt]=bn[vt]=bn[yt]=!0,bn[Ne]=bn[Ue]=bn[ut]=bn[$e]=bn[st]=bn[Be]=bn[Ve]=bn[Ge]=bn[Ze]=bn[Ke]=bn[Qe]=bn[et]=bn[tt]=bn[nt]=bn[ot]=!1;var xn={};xn[Ne]=xn[Ue]=xn[ut]=xn[st]=xn[$e]=xn[Be]=xn[ct]=xn[lt]=xn[ft]=xn[pt]=xn[ht]=xn[Ze]=xn[Ke]=xn[Qe]=xn[et]=xn[tt]=xn[nt]=xn[rt]=xn[dt]=xn[gt]=xn[vt]=xn[yt]=!0,xn[Ve]=xn[Ge]=xn[ot]=!1;var Sn={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},En={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Rn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},In={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},An=parseFloat,On=parseInt,kn="object"==typeof e&&e&&e.Object===Object&&e,Tn="object"==typeof self&&self&&self.Object===Object&&self,Ln=kn||Tn||Function("return this")(),Wn="object"==typeof t&&t&&!t.nodeType&&t,jn=Wn&&"object"==typeof r&&r&&!r.nodeType&&r,Mn=jn&&jn.exports===Wn,zn=Mn&&kn.process,Dn=function(){try{return zn&&zn.binding&&zn.binding("util")}catch(e){}}(),Fn=Dn&&Dn.isArrayBuffer,Pn=Dn&&Dn.isDate,Nn=Dn&&Dn.isMap,Un=Dn&&Dn.isRegExp,qn=Dn&&Dn.isSet,$n=Dn&&Dn.isTypedArray,Bn=A("length"),Hn=O(Sn),Vn=O(En),Gn=O(Rn),Jn=function e(t){function n(e){if(ta(e)&&!Bs(e)&&!(e instanceof w)){if(e instanceof i)return e;if(Ba.call(e,"__wrapped__"))return Eo(e)}return new i(e)}function r(){}function i(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=ie}function w(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ze,this.__views__=[]}function O(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Y(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function te(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ne(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new te;++t<n;)this.add(e[t])}function Nt(e){var t=this.__data__=new Y(e);this.size=t.size}function Qt(e,t){var n=Bs(e),r=!n&&$s(e),i=!n&&!r&&Vs(e),o=!n&&!r&&!i&&Ys(e),a=n||r||i||o,u=a?W(e.length,Da):[],s=u.length;for(var c in e)!t&&!Ba.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ro(c,s))||u.push(c);return u}function Xt(e){var t=e.length;return t?e[br(0,t-1)]:ie}function en(e,t){return Co(ai(e),fn(t,0,e.length))}function tn(e){return Co(ai(e))}function nn(e,t,n){(n===ie||Go(e[t],n))&&(n!==ie||t in e)||cn(e,t,n)}function rn(e,t,n){var r=e[t];Ba.call(e,t)&&Go(r,n)&&(n!==ie||t in e)||cn(e,t,n)}function on(e,t){for(var n=e.length;n--;)if(Go(e[n][0],t))return n;return-1}function an(e,t,n,r){return qu(e,function(e,i,o){t(r,e,n(e),o)}),r}function un(e,t){return e&&ui(t,ga(t),e)}function sn(e,t){return e&&ui(t,va(t),e)}function cn(e,t,n){"__proto__"==t&&su?su(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ln(e,t){for(var n=-1,r=t.length,i=ka(r),o=null==e;++n<r;)i[n]=o?ie:ha(e,t[n]);return i}function fn(e,t,n){return e===e&&(n!==ie&&(e=e<=n?e:n),t!==ie&&(e=e>=t?e:t)),e}function pn(e,t,n,r,i,o){var a,u=t&fe,s=t&pe,l=t&he;if(n&&(a=i?n(e,r,i,o):n(e)),a!==ie)return a;if(!ea(e))return e;var f=Bs(e);if(f){if(a=Qi(e),!u)return ai(e,a)}else{var p=es(e),h=p==Ge||p==Je;if(Vs(e))return Jr(e,u);if(p==Qe||p==Ne||h&&!i){if(a=s||h?{}:Xi(e),!u)return s?ci(e,sn(a,e)):si(e,un(a,e))}else{if(!xn[p])return i?e:{};a=eo(e,p,pn,u)}}o||(o=new Nt);var d=o.get(e);if(d)return d;o.set(e,a);var g=l?s?Ui:Ni:s?va:ga,v=f?ie:g(e);return c(v||e,function(r,i){v&&(r=e[i=r]),rn(a,i,pn(r,t,n,i,e,o))}),a}function hn(e){var t=ga(e);return function(n){return vn(n,e,t)}}function vn(e,t,n){var r=n.length;if(null==e)return!r;for(e=Ma(e);r--;){var i=n[r],o=t[i],a=e[i];if(a===ie&&!(i in e)||!o(a))return!1}return!0}function yn(e,t,n){if("function"!=typeof e)throw new Fa(ue);return rs(function(){e.apply(ie,n)},t)}function mn(e,t,n,r){var i=-1,o=h,a=!0,u=e.length,s=[],c=t.length;if(!u)return s;n&&(t=g(t,M(n))),r?(o=d,a=!1):t.length>=oe&&(o=D,a=!1,t=new ne(t));e:for(;++i<u;){var l=e[i],f=null==n?l:n(l);if(l=r||0!==l?l:0,a&&f===f){for(var p=c;p--;)if(t[p]===f)continue e;s.push(l)}else o(t,f,r)||s.push(l)}return s}function _n(e,t){var n=!0;return qu(e,function(e,r,i){return n=!!t(e,r,i)}),n}function Sn(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],a=t(o);if(null!=a&&(u===ie?a===a&&!oa(a):n(a,u)))var u=a,s=o}return s}function En(e,t,n,r){var i=e.length;for((n=sa(n))<0&&(n=-n>i?0:i+n),(r=r===ie||r>i?i:sa(r))<0&&(r+=i),r=n>r?0:ca(r);n<r;)e[n++]=t;return e}function Rn(e,t){var n=[];return qu(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function In(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=no),i||(i=[]);++o<a;){var u=e[o];t>0&&n(u)?t>1?In(u,t-1,n,r,i):v(i,u):r||(i[i.length]=u)}return i}function kn(e,t){return e&&Bu(e,t,ga)}function Tn(e,t){return e&&Hu(e,t,ga)}function Wn(e,t){return p(t,function(t){return Yo(e[t])})}function jn(e,t){for(var n=0,r=(t=Vr(t,e)).length;null!=e&&n<r;)e=e[bo(t[n++])];return n&&n==r?e:ie}function zn(e,t,n){var r=t(e);return Bs(e)?r:v(r,n(e))}function Dn(e){return null==e?e===ie?it:Ye:uu&&uu in Ma(e)?Ji(e):go(e)}function Bn(e,t){return e>t}function Zn(e,t){return null!=e&&Ba.call(e,t)}function Kn(e,t){return null!=e&&t in Ma(e)}function Yn(e,t,n){return e>=wu(t,n)&&e<_u(t,n)}function Qn(e,t,n){for(var r=n?d:h,i=e[0].length,o=e.length,a=o,u=ka(o),s=1/0,c=[];a--;){var l=e[a];a&&t&&(l=g(l,M(t))),s=wu(l.length,s),u[a]=!n&&(t||i>=120&&l.length>=120)?new ne(a&&l):ie}l=e[0];var f=-1,p=u[0];e:for(;++f<i&&c.length<s;){var v=l[f],y=t?t(v):v;if(v=n||0!==v?v:0,!(p?D(p,y):r(c,y,n))){for(a=o;--a;){var m=u[a];if(!(m?D(m,y):r(e[a],y,n)))continue e}p&&p.push(y),c.push(v)}}return c}function Xn(e,t,n,r){return kn(e,function(e,i,o){t(r,n(e),i,o)}),r}function er(e,t,n){var r=null==(e=yo(e,t=Vr(t,e)))?e:e[bo(ko(t))];return null==r?ie:u(r,e,n)}function tr(e){return ta(e)&&Dn(e)==Ne}function nr(e,t,n,r,i){return e===t||(null==e||null==t||!ta(e)&&!ta(t)?e!==e&&t!==t:rr(e,t,n,r,nr,i))}function rr(e,t,n,r,i,o){var a=Bs(e),u=Bs(t),s=a?Ue:es(e),c=u?Ue:es(t),l=(s=s==Ne?Qe:s)==Qe,f=(c=c==Ne?Qe:c)==Qe,p=s==c;if(p&&Vs(e)){if(!Vs(t))return!1;a=!0,l=!1}if(p&&!l)return o||(o=new Nt),a||Ys(e)?zi(e,t,n,r,i,o):Di(e,t,s,n,r,i,o);if(!(n&de)){var h=l&&Ba.call(e,"__wrapped__"),d=f&&Ba.call(t,"__wrapped__");if(h||d){var g=h?e.value():e,v=d?t.value():t;return o||(o=new Nt),i(g,v,n,r,o)}}return!!p&&(o||(o=new Nt),Fi(e,t,n,r,i,o))}function ir(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=Ma(e);i--;){var u=n[i];if(a&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++i<o;){var s=(u=n[i])[0],c=e[s],l=u[1];if(a&&u[2]){if(c===ie&&!(s in e))return!1}else{var f=new Nt;if(r)var p=r(c,l,s,e,t,f);if(!(p===ie?nr(l,c,de|ge,r,f):p))return!1}}return!0}function or(e){return!(!ea(e)||so(e))&&(Yo(e)?Ka:Vt).test(xo(e))}function ar(e){return"function"==typeof e?e:null==e?xa:"object"==typeof e?Bs(e)?pr(e[0],e[1]):fr(e):Ia(e)}function ur(e){if(!co(e))return mu(e);var t=[];for(var n in Ma(e))Ba.call(e,n)&&"constructor"!=n&&t.push(n);return t}function sr(e){if(!ea(e))return ho(e);var t=co(e),n=[];for(var r in e)("constructor"!=r||!t&&Ba.call(e,r))&&n.push(r);return n}function cr(e,t){return e<t}function lr(e,t){var n=-1,r=Jo(e)?ka(e.length):[];return qu(e,function(e,i,o){r[++n]=t(e,i,o)}),r}function fr(e){var t=Vi(e);return 1==t.length&&t[0][2]?fo(t[0][0],t[0][1]):function(n){return n===e||ir(n,e,t)}}function pr(e,t){return oo(e)&&lo(t)?fo(bo(e),t):function(n){var r=ha(n,e);return r===ie&&r===t?da(n,e):nr(t,r,de|ge)}}function hr(e,t,n,r,i){e!==t&&Bu(t,function(o,a){if(ea(o))i||(i=new Nt),dr(e,t,a,n,hr,r,i);else{var u=r?r(e[a],o,a+"",e,t,i):ie;u===ie&&(u=o),nn(e,a,u)}},va)}function dr(e,t,n,r,i,o,a){var u=e[n],s=t[n],c=a.get(s);if(c)nn(e,n,c);else{var l=o?o(u,s,n+"",e,t,a):ie,f=l===ie;if(f){var p=Bs(s),h=!p&&Vs(s),d=!p&&!h&&Ys(s);l=s,p||h||d?Bs(u)?l=u:Zo(u)?l=ai(u):h?(f=!1,l=Jr(s,!0)):d?(f=!1,l=ti(s,!0)):l=[]:ra(s)||$s(s)?(l=u,$s(u)?l=fa(u):(!ea(u)||r&&Yo(u))&&(l=Xi(s))):f=!1}f&&(a.set(s,l),i(l,s,r,o,a),a.delete(s)),nn(e,n,l)}}function gr(e,t){var n=e.length;if(n)return t+=t<0?n:0,ro(t,n)?e[t]:ie}function vr(e,t,n){var r=-1;return t=g(t.length?t:[xa],M(Bi())),T(lr(e,function(e,n,i){return{criteria:g(t,function(t){return t(e)}),index:++r,value:e}}),function(e,t){return ri(e,t,n)})}function yr(e,t){return mr(e,t,function(t,n){return da(e,n)})}function mr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],u=jn(e,a);n(u,a)&&Ar(o,Vr(a,e),u)}return o}function _r(e){return function(t){return jn(t,e)}}function wr(e,t,n,r){var i=r?E:S,o=-1,a=t.length,u=e;for(e===t&&(t=ai(t)),n&&(u=g(e,M(n)));++o<a;)for(var s=0,c=t[o],l=n?n(c):c;(s=i(u,l,s,r))>-1;)u!==e&&iu.call(u,s,1),iu.call(e,s,1);return e}function Cr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;ro(i)?iu.call(e,i,1):Fr(e,i)}}return e}function br(e,t){return e+hu(xu()*(t-e+1))}function xr(e,t,n,r){for(var i=-1,o=_u(pu((t-e)/(n||1)),0),a=ka(o);o--;)a[r?o:++i]=e,e+=n;return a}function Sr(e,t){var n="";if(!e||t<1||t>We)return n;do{t%2&&(n+=e),(t=hu(t/2))&&(e+=e)}while(t);return n}function Er(e,t){return is(vo(e,t,xa),e+"")}function Rr(e){return Xt(ma(e))}function Ir(e,t){var n=ma(e);return Co(n,fn(t,0,n.length))}function Ar(e,t,n,r){if(!ea(e))return e;for(var i=-1,o=(t=Vr(t,e)).length,a=o-1,u=e;null!=u&&++i<o;){var s=bo(t[i]),c=n;if(i!=a){var l=u[s];(c=r?r(l,s,u):ie)===ie&&(c=ea(l)?l:ro(t[i+1])?[]:{})}rn(u,s,c),u=u[s]}return e}function Or(e){return Co(ma(e))}function kr(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=ka(i);++r<i;)o[r]=e[r+t];return o}function Tr(e,t){var n;return qu(e,function(e,r,i){return!(n=t(e,r,i))}),!!n}function Lr(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=Fe){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!oa(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return Wr(e,t,xa,n)}function Wr(e,t,n,r){t=n(t);for(var i=0,o=null==e?0:e.length,a=t!==t,u=null===t,s=oa(t),c=t===ie;i<o;){var l=hu((i+o)/2),f=n(e[l]),p=f!==ie,h=null===f,d=f===f,g=oa(f);if(a)var v=r||d;else v=c?d&&(r||p):u?d&&p&&(r||!h):s?d&&p&&!h&&(r||!g):!h&&!g&&(r?f<=t:f<t);v?i=l+1:o=l}return wu(o,De)}function jr(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],u=t?t(a):a;if(!n||!Go(u,s)){var s=u;o[i++]=0===a?0:a}}return o}function Mr(e){return"number"==typeof e?e:oa(e)?Me:+e}function zr(e){if("string"==typeof e)return e;if(Bs(e))return g(e,zr)+"";if(oa(e))return Nu?Nu.call(e):"";var t=e+"";return"0"==t&&1/e==-Le?"-0":t}function Dr(e,t,n){var r=-1,i=h,o=e.length,a=!0,u=[],s=u;if(n)a=!1,i=d;else if(o>=oe){var c=t?null:Ku(e);if(c)return Z(c);a=!1,i=D,s=new ne}else s=t?[]:u;e:for(;++r<o;){var l=e[r],f=t?t(l):l;if(l=n||0!==l?l:0,a&&f===f){for(var p=s.length;p--;)if(s[p]===f)continue e;t&&s.push(f),u.push(l)}else i(s,f,n)||(s!==u&&s.push(f),u.push(l))}return u}function Fr(e,t){return t=Vr(t,e),null==(e=yo(e,t))||delete e[bo(ko(t))]}function Pr(e,t,n,r){return Ar(e,t,n(jn(e,t)),r)}function Nr(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?kr(e,r?0:o,r?o+1:i):kr(e,r?o+1:0,r?i:o)}function Ur(e,t){var n=e;return n instanceof w&&(n=n.value()),y(t,function(e,t){return t.func.apply(t.thisArg,v([e],t.args))},n)}function qr(e,t,n){var r=e.length;if(r<2)return r?Dr(e[0]):[];for(var i=-1,o=ka(r);++i<r;)for(var a=e[i],u=-1;++u<r;)u!=i&&(o[i]=mn(o[i]||a,e[u],t,n));return Dr(In(o,1),t,n)}function $r(e,t,n){for(var r=-1,i=e.length,o=t.length,a={};++r<i;){var u=r<o?t[r]:ie;n(a,e[r],u)}return a}function Br(e){return Zo(e)?e:[]}function Hr(e){return"function"==typeof e?e:xa}function Vr(e,t){return Bs(e)?e:oo(e,t)?[e]:os(pa(e))}function Gr(e,t,n){var r=e.length;return n=n===ie?r:n,!t&&n>=r?e:kr(e,t,n)}function Jr(e,t){if(t)return e.slice();var n=e.length,r=eu?eu(n):new e.constructor(n);return e.copy(r),r}function Zr(e){var t=new e.constructor(e.byteLength);return new Xa(t).set(new Xa(e)),t}function Kr(e,t){var n=t?Zr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function Yr(e,t,n){return y(t?n(V(e),fe):V(e),o,new e.constructor)}function Qr(e){var t=new e.constructor(e.source,$t.exec(e));return t.lastIndex=e.lastIndex,t}function Xr(e,t,n){return y(t?n(Z(e),fe):Z(e),a,new e.constructor)}function ei(e){return Pu?Ma(Pu.call(e)):{}}function ti(e,t){var n=t?Zr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function ni(e,t){if(e!==t){var n=e!==ie,r=null===e,i=e===e,o=oa(e),a=t!==ie,u=null===t,s=t===t,c=oa(t);if(!u&&!c&&!o&&e>t||o&&a&&s&&!u&&!c||r&&a&&s||!n&&s||!i)return 1;if(!r&&!o&&!c&&e<t||c&&n&&i&&!r&&!o||u&&n&&i||!a&&i||!s)return-1}return 0}function ri(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,u=n.length;++r<a;){var s=ni(i[r],o[r]);if(s)return r>=u?s:s*("desc"==n[r]?-1:1)}return e.index-t.index}function ii(e,t,n,r){for(var i=-1,o=e.length,a=n.length,u=-1,s=t.length,c=_u(o-a,0),l=ka(s+c),f=!r;++u<s;)l[u]=t[u];for(;++i<a;)(f||i<o)&&(l[n[i]]=e[i]);for(;c--;)l[u++]=e[i++];return l}function oi(e,t,n,r){for(var i=-1,o=e.length,a=-1,u=n.length,s=-1,c=t.length,l=_u(o-u,0),f=ka(l+c),p=!r;++i<l;)f[i]=e[i];for(var h=i;++s<c;)f[h+s]=t[s];for(;++a<u;)(p||i<o)&&(f[h+n[a]]=e[i++]);return f}function ai(e,t){var n=-1,r=e.length;for(t||(t=ka(r));++n<r;)t[n]=e[n];return t}function ui(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var u=t[o],s=r?r(n[u],e[u],u,n,e):ie;s===ie&&(s=e[u]),i?cn(n,u,s):rn(n,u,s)}return n}function si(e,t){return ui(e,Qu(e),t)}function ci(e,t){return ui(e,Xu(e),t)}function li(e,t){return function(n,r){var i=Bs(n)?s:an,o=t?t():{};return i(n,e,Bi(r,2),o)}}function fi(e){return Er(function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:ie,a=i>2?n[2]:ie;for(o=e.length>3&&"function"==typeof o?(i--,o):ie,a&&io(n[0],n[1],a)&&(o=i<3?ie:o,i=1),t=Ma(t);++r<i;){var u=n[r];u&&e(t,u,r,o)}return t})}function pi(e,t){return function(n,r){if(null==n)return n;if(!Jo(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=Ma(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function hi(e){return function(t,n,r){for(var i=-1,o=Ma(t),a=r(t),u=a.length;u--;){var s=a[e?u:++i];if(!1===n(o[s],s,o))break}return t}}function di(e,t,n){function r(){return(this&&this!==Ln&&this instanceof r?o:e).apply(i?n:this,arguments)}var i=t&ve,o=yi(e);return r}function gi(e){return function(t){var n=$(t=pa(t))?ee(t):ie,r=n?n[0]:t.charAt(0),i=n?Gr(n,1).join(""):t.slice(1);return r[e]()+i}}function vi(e){return function(t){return y(Ca(wa(t).replace(dn,"")),e,"")}}function yi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Uu(e.prototype),r=e.apply(n,t);return ea(r)?r:n}}function mi(e,t,n){function r(){for(var o=arguments.length,a=ka(o),s=o,c=$i(r);s--;)a[s]=arguments[s];var l=o<3&&a[0]!==c&&a[o-1]!==c?[]:J(a,c);return(o-=l.length)<n?Oi(e,t,Ci,r.placeholder,ie,a,l,ie,ie,n-o):u(this&&this!==Ln&&this instanceof r?i:e,this,a)}var i=yi(e);return r}function _i(e){return function(t,n,r){var i=Ma(t);if(!Jo(t)){var o=Bi(n,3);t=ga(t),n=function(e){return o(i[e],e,i)}}var a=e(t,n,r);return a>-1?i[o?t[a]:a]:ie}}function wi(e){return Pi(function(t){var n=t.length,r=n,o=i.prototype.thru;for(e&&t.reverse();r--;){var a=t[r];if("function"!=typeof a)throw new Fa(ue);if(o&&!u&&"wrapper"==qi(a))var u=new i([],!0)}for(r=u?r:n;++r<n;){var s=qi(a=t[r]),c="wrapper"==s?Yu(a):ie;u=c&&uo(c[0])&&c[1]==(xe|_e|Ce|Se)&&!c[4].length&&1==c[9]?u[qi(c[0])].apply(u,c[3]):1==a.length&&uo(a)?u[s]():u.thru(a)}return function(){var e=arguments,r=e[0];if(u&&1==e.length&&Bs(r))return u.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}})}function Ci(e,t,n,r,i,o,a,u,s,c){function l(){for(var y=arguments.length,m=ka(y),_=y;_--;)m[_]=arguments[_];if(d)var w=$i(l),C=N(m,w);if(r&&(m=ii(m,r,i,d)),o&&(m=oi(m,o,a,d)),y-=C,d&&y<c){var b=J(m,w);return Oi(e,t,Ci,l.placeholder,n,m,b,u,s,c-y)}var x=p?n:this,S=h?x[e]:e;return y=m.length,u?m=mo(m,u):g&&y>1&&m.reverse(),f&&s<y&&(m.length=s),this&&this!==Ln&&this instanceof l&&(S=v||yi(S)),S.apply(x,m)}var f=t&xe,p=t&ve,h=t&ye,d=t&(_e|we),g=t&Ee,v=h?ie:yi(e);return l}function bi(e,t){return function(n,r){return Xn(n,e,t(r),{})}}function xi(e,t){return function(n,r){var i;if(n===ie&&r===ie)return t;if(n!==ie&&(i=n),r!==ie){if(i===ie)return r;"string"==typeof n||"string"==typeof r?(n=zr(n),r=zr(r)):(n=Mr(n),r=Mr(r)),i=e(n,r)}return i}}function Si(e){return Pi(function(t){return t=g(t,M(Bi())),Er(function(n){var r=this;return e(t,function(e){return u(e,r,n)})})})}function Ei(e,t){var n=(t=t===ie?" ":zr(t)).length;if(n<2)return n?Sr(t,e):t;var r=Sr(t,pu(e/X(t)));return $(t)?Gr(ee(r),0,e).join(""):r.slice(0,e)}function Ri(e,t,n,r){function i(){for(var t=-1,s=arguments.length,c=-1,l=r.length,f=ka(l+s),p=this&&this!==Ln&&this instanceof i?a:e;++c<l;)f[c]=r[c];for(;s--;)f[c++]=arguments[++t];return u(p,o?n:this,f)}var o=t&ve,a=yi(e);return i}function Ii(e){return function(t,n,r){return r&&"number"!=typeof r&&io(t,n,r)&&(n=r=ie),t=ua(t),n===ie?(n=t,t=0):n=ua(n),r=r===ie?t<n?1:-1:ua(r),xr(t,n,r,e)}}function Ai(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=la(t),n=la(n)),e(t,n)}}function Oi(e,t,n,r,i,o,a,u,s,c){var l=t&_e,f=l?a:ie,p=l?ie:a,h=l?o:ie,d=l?ie:o;t|=l?Ce:be,(t&=~(l?be:Ce))&me||(t&=~(ve|ye));var g=[e,t,i,h,f,d,p,u,s,c],v=n.apply(ie,g);return uo(e)&&ns(v,g),v.placeholder=r,_o(v,e,t)}function ki(e){var t=ja[e];return function(e,n){if(e=la(e),n=null==n?0:wu(sa(n),292)){var r=(pa(e)+"e").split("e");return+((r=(pa(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}function Ti(e){return function(t){var n=es(t);return n==Ze?V(t):n==tt?K(t):j(t,e(t))}}function Li(e,t,n,r,i,o,a,u){var s=t&ye;if(!s&&"function"!=typeof e)throw new Fa(ue);var c=r?r.length:0;if(c||(t&=~(Ce|be),r=i=ie),a=a===ie?a:_u(sa(a),0),u=u===ie?u:sa(u),c-=i?i.length:0,t&be){var l=r,f=i;r=i=ie}var p=s?ie:Yu(e),h=[e,t,n,r,i,l,f,o,a,u];if(p&&po(h,p),e=h[0],t=h[1],n=h[2],r=h[3],i=h[4],!(u=h[9]=h[9]===ie?s?0:e.length:_u(h[9]-c,0))&&t&(_e|we)&&(t&=~(_e|we)),t&&t!=ve)d=t==_e||t==we?mi(e,t,u):t!=Ce&&t!=(ve|Ce)||i.length?Ci.apply(ie,h):Ri(e,t,n,r);else var d=di(e,t,n);return _o((p?Vu:ns)(d,h),e,t)}function Wi(e,t,n,r){return e===ie||Go(e,Ua[n])&&!Ba.call(r,n)?t:e}function ji(e,t,n,r,i,o){return ea(e)&&ea(t)&&(o.set(t,e),hr(e,t,ie,ji,o),o.delete(t)),e}function Mi(e){return ra(e)?ie:e}function zi(e,t,n,r,i,o){var a=n&de,u=e.length,s=t.length;if(u!=s&&!(a&&s>u))return!1;var c=o.get(e);if(c&&o.get(t))return c==t;var l=-1,f=!0,p=n&ge?new ne:ie;for(o.set(e,t),o.set(t,e);++l<u;){var h=e[l],d=t[l];if(r)var g=a?r(d,h,l,t,e,o):r(h,d,l,e,t,o);if(g!==ie){if(g)continue;f=!1;break}if(p){if(!_(t,function(e,t){if(!D(p,t)&&(h===e||i(h,e,n,r,o)))return p.push(t)})){f=!1;break}}else if(h!==d&&!i(h,d,n,r,o)){f=!1;break}}return o.delete(e),o.delete(t),f}function Di(e,t,n,r,i,o,a){switch(n){case st:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ut:return!(e.byteLength!=t.byteLength||!o(new Xa(e),new Xa(t)));case $e:case Be:case Ke:return Go(+e,+t);case Ve:return e.name==t.name&&e.message==t.message;case et:case nt:return e==t+"";case Ze:var u=V;case tt:var s=r&de;if(u||(u=Z),e.size!=t.size&&!s)return!1;var c=a.get(e);if(c)return c==t;r|=ge,a.set(e,t);var l=zi(u(e),u(t),r,i,o,a);return a.delete(e),l;case rt:if(Pu)return Pu.call(e)==Pu.call(t)}return!1}function Fi(e,t,n,r,i,o){var a=n&de,u=Ni(e),s=u.length;if(s!=Ni(t).length&&!a)return!1;for(var c=s;c--;){var l=u[c];if(!(a?l in t:Ba.call(t,l)))return!1}var f=o.get(e);if(f&&o.get(t))return f==t;var p=!0;o.set(e,t),o.set(t,e);for(var h=a;++c<s;){var d=e[l=u[c]],g=t[l];if(r)var v=a?r(g,d,l,t,e,o):r(d,g,l,e,t,o);if(!(v===ie?d===g||i(d,g,n,r,o):v)){p=!1;break}h||(h="constructor"==l)}if(p&&!h){var y=e.constructor,m=t.constructor;y!=m&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof m&&m instanceof m)&&(p=!1)}return o.delete(e),o.delete(t),p}function Pi(e){return is(vo(e,ie,Ao),e+"")}function Ni(e){return zn(e,ga,Qu)}function Ui(e){return zn(e,va,Xu)}function qi(e){for(var t=e.name+"",n=Lu[t],r=Ba.call(Lu,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function $i(e){return(Ba.call(n,"placeholder")?n:e).placeholder}function Bi(){var e=n.iteratee||Sa;return e=e===Sa?ar:e,arguments.length?e(arguments[0],arguments[1]):e}function Hi(e,t){var n=e.__data__;return ao(t)?n["string"==typeof t?"string":"hash"]:n.map}function Vi(e){for(var t=ga(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,lo(i)]}return t}function Gi(e,t){var n=q(e,t);return or(n)?n:ie}function Ji(e){var t=Ba.call(e,uu),n=e[uu];try{e[uu]=ie;var r=!0}catch(e){}var i=Ga.call(e);return r&&(t?e[uu]=n:delete e[uu]),i}function Zi(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=wu(t,e+a);break;case"takeRight":e=_u(e,t-a)}}return{start:e,end:t}}function Ki(e){var t=e.match(Ft);return t?t[1].split(Pt):[]}function Yi(e,t,n){for(var r=-1,i=(t=Vr(t,e)).length,o=!1;++r<i;){var a=bo(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&Xo(i)&&ro(a,i)&&(Bs(e)||$s(e))}function Qi(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&Ba.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Xi(e){return"function"!=typeof e.constructor||co(e)?{}:Uu(tu(e))}function eo(e,t,n,r){var i=e.constructor;switch(t){case ut:return Zr(e);case $e:case Be:return new i(+e);case st:return Kr(e,r);case ct:case lt:case ft:case pt:case ht:case dt:case gt:case vt:case yt:return ti(e,r);case Ze:return Yr(e,r,n);case Ke:case nt:return new i(e);case et:return Qr(e);case tt:return Xr(e,r,n);case rt:return ei(e)}}function to(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Dt,"{\n/* [wrapped with "+t+"] */\n")}function no(e){return Bs(e)||$s(e)||!!(ou&&e&&e[ou])}function ro(e,t){return!!(t=null==t?We:t)&&("number"==typeof e||Jt.test(e))&&e>-1&&e%1==0&&e<t}function io(e,t,n){if(!ea(n))return!1;var r=typeof t;return!!("number"==r?Jo(n)&&ro(t,n.length):"string"==r&&t in n)&&Go(n[t],e)}function oo(e,t){if(Bs(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!oa(e))||Ot.test(e)||!At.test(e)||null!=t&&e in Ma(t)}function ao(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function uo(e){var t=qi(e),r=n[t];if("function"!=typeof r||!(t in w.prototype))return!1;if(e===r)return!0;var i=Yu(r);return!!i&&e===i[0]}function so(e){return!!Va&&Va in e}function co(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ua)}function lo(e){return e===e&&!ea(e)}function fo(e,t){return function(n){return null!=n&&n[e]===t&&(t!==ie||e in Ma(n))}}function po(e,t){var n=e[1],r=t[1],i=n|r,o=i<(ve|ye|xe),a=r==xe&&n==_e||r==xe&&n==Se&&e[7].length<=t[8]||r==(xe|Se)&&t[7].length<=t[8]&&n==_e;if(!o&&!a)return e;r&ve&&(e[2]=t[2],i|=n&ve?0:me);var u=t[3];if(u){var s=e[3];e[3]=s?ii(s,u,t[4]):u,e[4]=s?J(e[3],le):t[4]}return(u=t[5])&&(s=e[5],e[5]=s?oi(s,u,t[6]):u,e[6]=s?J(e[5],le):t[6]),(u=t[7])&&(e[7]=u),r&xe&&(e[8]=null==e[8]?t[8]:wu(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}function ho(e){var t=[];if(null!=e)for(var n in Ma(e))t.push(n);return t}function go(e){return Ga.call(e)}function vo(e,t,n){return t=_u(t===ie?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=_u(r.length-t,0),a=ka(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=ka(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),u(e,this,s)}}function yo(e,t){return t.length<2?e:jn(e,kr(t,0,-1))}function mo(e,t){for(var n=e.length,r=wu(t.length,n),i=ai(e);r--;){var o=t[r];e[r]=ro(o,n)?i[o]:ie}return e}function _o(e,t,n){var r=t+"";return is(e,to(r,So(Ki(r),n)))}function wo(e){var t=0,n=0;return function(){var r=Cu(),i=Oe-(r-n);if(n=r,i>0){if(++t>=Ae)return arguments[0]}else t=0;return e.apply(ie,arguments)}}function Co(e,t){var n=-1,r=e.length,i=r-1;for(t=t===ie?r:t;++n<t;){var o=br(n,i),a=e[o];e[o]=e[n],e[n]=a}return e.length=t,e}function bo(e){if("string"==typeof e||oa(e))return e;var t=e+"";return"0"==t&&1/e==-Le?"-0":t}function xo(e){if(null!=e){try{return $a.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function So(e,t){return c(Pe,function(n){var r="_."+n[0];t&n[1]&&!h(e,r)&&e.push(r)}),e.sort()}function Eo(e){if(e instanceof w)return e.clone();var t=new i(e.__wrapped__,e.__chain__);return t.__actions__=ai(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Ro(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:sa(n);return i<0&&(i=_u(r+i,0)),x(e,Bi(t,3),i)}function Io(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return n!==ie&&(i=sa(n),i=n<0?_u(r+i,0):wu(i,r-1)),x(e,Bi(t,3),i,!0)}function Ao(e){return(null==e?0:e.length)?In(e,1):[]}function Oo(e){return e&&e.length?e[0]:ie}function ko(e){var t=null==e?0:e.length;return t?e[t-1]:ie}function To(e,t){return e&&e.length&&t&&t.length?wr(e,t):e}function Lo(e){return null==e?e:Su.call(e)}function Wo(e){if(!e||!e.length)return[];var t=0;return e=p(e,function(e){if(Zo(e))return t=_u(e.length,t),!0}),W(t,function(t){return g(e,A(t))})}function jo(e,t){if(!e||!e.length)return[];var n=Wo(e);return null==t?n:g(n,function(e){return u(t,ie,e)})}function Mo(e){var t=n(e);return t.__chain__=!0,t}function zo(e,t){return t(e)}function Do(e,t){return(Bs(e)?c:qu)(e,Bi(t,3))}function Fo(e,t){return(Bs(e)?l:$u)(e,Bi(t,3))}function Po(e,t){return(Bs(e)?g:lr)(e,Bi(t,3))}function No(e,t,n){return t=n?ie:t,t=e&&null==t?e.length:t,Li(e,xe,ie,ie,ie,ie,t)}function Uo(e,t){var n;if("function"!=typeof t)throw new Fa(ue);return e=sa(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=ie),n}}function qo(e,t,n){var r=Li(e,_e,ie,ie,ie,ie,ie,t=n?ie:t);return r.placeholder=qo.placeholder,r}function $o(e,t,n){var r=Li(e,we,ie,ie,ie,ie,ie,t=n?ie:t);return r.placeholder=$o.placeholder,r}function Bo(e,t,n){function r(t){var n=l,r=f;return l=f=ie,v=t,h=e.apply(r,n)}function i(e){return v=e,d=rs(u,t),y?r(e):h}function o(e){var n=e-v,r=t-(e-g);return m?wu(r,p-n):r}function a(e){var n=e-g,r=e-v;return g===ie||n>=t||n<0||m&&r>=p}function u(){var e=Ls();if(a(e))return s(e);d=rs(u,o(e))}function s(e){return d=ie,_&&l?r(e):(l=f=ie,h)}function c(){var e=Ls(),n=a(e);if(l=arguments,f=this,g=e,n){if(d===ie)return i(g);if(m)return d=rs(u,t),r(g)}return d===ie&&(d=rs(u,t)),h}var l,f,p,h,d,g,v=0,y=!1,m=!1,_=!0;if("function"!=typeof e)throw new Fa(ue);return t=la(t)||0,ea(n)&&(y=!!n.leading,p=(m="maxWait"in n)?_u(la(n.maxWait)||0,t):p,_="trailing"in n?!!n.trailing:_),c.cancel=function(){d!==ie&&Zu(d),v=0,l=g=f=d=ie},c.flush=function(){return d===ie?h:s(Ls())},c}function Ho(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Fa(ue);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Ho.Cache||te),n}function Vo(e){if("function"!=typeof e)throw new Fa(ue);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Go(e,t){return e===t||e!==e&&t!==t}function Jo(e){return null!=e&&Xo(e.length)&&!Yo(e)}function Zo(e){return ta(e)&&Jo(e)}function Ko(e){if(!ta(e))return!1;var t=Dn(e);return t==Ve||t==He||"string"==typeof e.message&&"string"==typeof e.name&&!ra(e)}function Yo(e){if(!ea(e))return!1;var t=Dn(e);return t==Ge||t==Je||t==qe||t==Xe}function Qo(e){return"number"==typeof e&&e==sa(e)}function Xo(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=We}function ea(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ta(e){return null!=e&&"object"==typeof e}function na(e){return"number"==typeof e||ta(e)&&Dn(e)==Ke}function ra(e){if(!ta(e)||Dn(e)!=Qe)return!1;var t=tu(e);if(null===t)return!0;var n=Ba.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&$a.call(n)==Ja}function ia(e){return"string"==typeof e||!Bs(e)&&ta(e)&&Dn(e)==nt}function oa(e){return"symbol"==typeof e||ta(e)&&Dn(e)==rt}function aa(e){if(!e)return[];if(Jo(e))return ia(e)?ee(e):ai(e);if(au&&e[au])return H(e[au]());var t=es(e);return(t==Ze?V:t==tt?Z:ma)(e)}function ua(e){return e?(e=la(e))===Le||e===-Le?(e<0?-1:1)*je:e===e?e:0:0===e?e:0}function sa(e){var t=ua(e),n=t%1;return t===t?n?t-n:t:0}function ca(e){return e?fn(sa(e),0,ze):0}function la(e){if("number"==typeof e)return e;if(oa(e))return Me;if(ea(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ea(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(jt,"");var n=Ht.test(e);return n||Gt.test(e)?On(e.slice(2),n?2:8):Bt.test(e)?Me:+e}function fa(e){return ui(e,va(e))}function pa(e){return null==e?"":zr(e)}function ha(e,t,n){var r=null==e?ie:jn(e,t);return r===ie?n:r}function da(e,t){return null!=e&&Yi(e,t,Kn)}function ga(e){return Jo(e)?Qt(e):ur(e)}function va(e){return Jo(e)?Qt(e,!0):sr(e)}function ya(e,t){if(null==e)return{};var n=g(Ui(e),function(e){return[e]});return t=Bi(t),mr(e,n,function(e,n){return t(e,n[0])})}function ma(e){return null==e?[]:z(e,ga(e))}function _a(e){return xc(pa(e).toLowerCase())}function wa(e){return(e=pa(e))&&e.replace(Zt,Hn).replace(gn,"")}function Ca(e,t,n){return e=pa(e),(t=n?ie:t)===ie?B(e)?re(e):C(e):e.match(t)||[]}function ba(e){return function(){return e}}function xa(e){return e}function Sa(e){return ar("function"==typeof e?e:pn(e,fe))}function Ea(e,t,n){var r=ga(t),i=Wn(t,r);null!=n||ea(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Wn(t,ga(t)));var o=!(ea(n)&&"chain"in n&&!n.chain),a=Yo(e);return c(i,function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__);return(n.__actions__=ai(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,v([this.value()],arguments))})}),e}function Ra(){}function Ia(e){return oo(e)?A(bo(e)):_r(e)}function Aa(){return[]}function Oa(){return!1}var ka=(t=null==t?Ln:Jn.defaults(Ln.Object(),t,Jn.pick(Ln,wn))).Array,Ta=t.Date,La=t.Error,Wa=t.Function,ja=t.Math,Ma=t.Object,za=t.RegExp,Da=t.String,Fa=t.TypeError,Pa=ka.prototype,Na=Wa.prototype,Ua=Ma.prototype,qa=t["__core-js_shared__"],$a=Na.toString,Ba=Ua.hasOwnProperty,Ha=0,Va=function(){var e=/[^.]+$/.exec(qa&&qa.keys&&qa.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ga=Ua.toString,Ja=$a.call(Ma),Za=Ln._,Ka=za("^"+$a.call(Ba).replace(Lt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ya=Mn?t.Buffer:ie,Qa=t.Symbol,Xa=t.Uint8Array,eu=Ya?Ya.allocUnsafe:ie,tu=G(Ma.getPrototypeOf,Ma),nu=Ma.create,ru=Ua.propertyIsEnumerable,iu=Pa.splice,ou=Qa?Qa.isConcatSpreadable:ie,au=Qa?Qa.iterator:ie,uu=Qa?Qa.toStringTag:ie,su=function(){try{var e=Gi(Ma,"defineProperty");return e({},"",{}),e}catch(e){}}(),cu=t.clearTimeout!==Ln.clearTimeout&&t.clearTimeout,lu=Ta&&Ta.now!==Ln.Date.now&&Ta.now,fu=t.setTimeout!==Ln.setTimeout&&t.setTimeout,pu=ja.ceil,hu=ja.floor,du=Ma.getOwnPropertySymbols,gu=Ya?Ya.isBuffer:ie,vu=t.isFinite,yu=Pa.join,mu=G(Ma.keys,Ma),_u=ja.max,wu=ja.min,Cu=Ta.now,bu=t.parseInt,xu=ja.random,Su=Pa.reverse,Eu=Gi(t,"DataView"),Ru=Gi(t,"Map"),Iu=Gi(t,"Promise"),Au=Gi(t,"Set"),Ou=Gi(t,"WeakMap"),ku=Gi(Ma,"create"),Tu=Ou&&new Ou,Lu={},Wu=xo(Eu),ju=xo(Ru),Mu=xo(Iu),zu=xo(Au),Du=xo(Ou),Fu=Qa?Qa.prototype:ie,Pu=Fu?Fu.valueOf:ie,Nu=Fu?Fu.toString:ie,Uu=function(){function e(){}return function(t){if(!ea(t))return{};if(nu)return nu(t);e.prototype=t;var n=new e;return e.prototype=ie,n}}();n.templateSettings={escape:Et,evaluate:Rt,interpolate:It,variable:"",imports:{_:n}},n.prototype=r.prototype,n.prototype.constructor=n,i.prototype=Uu(r.prototype),i.prototype.constructor=i,w.prototype=Uu(r.prototype),w.prototype.constructor=w,O.prototype.clear=function(){this.__data__=ku?ku(null):{},this.size=0},O.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},O.prototype.get=function(e){var t=this.__data__;if(ku){var n=t[e];return n===se?ie:n}return Ba.call(t,e)?t[e]:ie},O.prototype.has=function(e){var t=this.__data__;return ku?t[e]!==ie:Ba.call(t,e)},O.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ku&&t===ie?se:t,this},Y.prototype.clear=function(){this.__data__=[],this.size=0},Y.prototype.delete=function(e){var t=this.__data__,n=on(t,e);return!(n<0||(n==t.length-1?t.pop():iu.call(t,n,1),--this.size,0))},Y.prototype.get=function(e){var t=this.__data__,n=on(t,e);return n<0?ie:t[n][1]},Y.prototype.has=function(e){return on(this.__data__,e)>-1},Y.prototype.set=function(e,t){var n=this.__data__,r=on(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},te.prototype.clear=function(){this.size=0,this.__data__={hash:new O,map:new(Ru||Y),string:new O}},te.prototype.delete=function(e){var t=Hi(this,e).delete(e);return this.size-=t?1:0,t},te.prototype.get=function(e){return Hi(this,e).get(e)},te.prototype.has=function(e){return Hi(this,e).has(e)},te.prototype.set=function(e,t){var n=Hi(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},ne.prototype.add=ne.prototype.push=function(e){return this.__data__.set(e,se),this},ne.prototype.has=function(e){return this.__data__.has(e)},Nt.prototype.clear=function(){this.__data__=new Y,this.size=0},Nt.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Nt.prototype.get=function(e){return this.__data__.get(e)},Nt.prototype.has=function(e){return this.__data__.has(e)},Nt.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Y){var r=n.__data__;if(!Ru||r.length<oe-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new te(r)}return n.set(e,t),this.size=n.size,this};var qu=pi(kn),$u=pi(Tn,!0),Bu=hi(),Hu=hi(!0),Vu=Tu?function(e,t){return Tu.set(e,t),e}:xa,Gu=su?function(e,t){return su(e,"toString",{configurable:!0,enumerable:!1,value:ba(t),writable:!0})}:xa,Ju=Er,Zu=cu||function(e){return Ln.clearTimeout(e)},Ku=Au&&1/Z(new Au([,-0]))[1]==Le?function(e){return new Au(e)}:Ra,Yu=Tu?function(e){return Tu.get(e)}:Ra,Qu=du?function(e){return null==e?[]:(e=Ma(e),p(du(e),function(t){return ru.call(e,t)}))}:Aa,Xu=du?function(e){for(var t=[];e;)v(t,Qu(e)),e=tu(e);return t}:Aa,es=Dn;(Eu&&es(new Eu(new ArrayBuffer(1)))!=st||Ru&&es(new Ru)!=Ze||Iu&&"[object Promise]"!=es(Iu.resolve())||Au&&es(new Au)!=tt||Ou&&es(new Ou)!=ot)&&(es=function(e){var t=Dn(e),n=t==Qe?e.constructor:ie,r=n?xo(n):"";if(r)switch(r){case Wu:return st;case ju:return Ze;case Mu:return"[object Promise]";case zu:return tt;case Du:return ot}return t});var ts=qa?Yo:Oa,ns=wo(Vu),rs=fu||function(e,t){return Ln.setTimeout(e,t)},is=wo(Gu),os=function(e){var t=Ho(e,function(e){return n.size===ce&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return kt.test(e)&&t.push(""),e.replace(Tt,function(e,n,r,i){t.push(r?i.replace(Ut,"$1"):n||e)}),t}),as=Er(function(e,t){return Zo(e)?mn(e,In(t,1,Zo,!0)):[]}),us=Er(function(e,t){var n=ko(t);return Zo(n)&&(n=ie),Zo(e)?mn(e,In(t,1,Zo,!0),Bi(n,2)):[]}),ss=Er(function(e,t){var n=ko(t);return Zo(n)&&(n=ie),Zo(e)?mn(e,In(t,1,Zo,!0),ie,n):[]}),cs=Er(function(e){var t=g(e,Br);return t.length&&t[0]===e[0]?Qn(t):[]}),ls=Er(function(e){var t=ko(e),n=g(e,Br);return t===ko(n)?t=ie:n.pop(),n.length&&n[0]===e[0]?Qn(n,Bi(t,2)):[]}),fs=Er(function(e){var t=ko(e),n=g(e,Br);return(t="function"==typeof t?t:ie)&&n.pop(),n.length&&n[0]===e[0]?Qn(n,ie,t):[]}),ps=Er(To),hs=Pi(function(e,t){var n=null==e?0:e.length,r=ln(e,t);return Cr(e,g(t,function(e){return ro(e,n)?+e:e}).sort(ni)),r}),ds=Er(function(e){return Dr(In(e,1,Zo,!0))}),gs=Er(function(e){var t=ko(e);return Zo(t)&&(t=ie),Dr(In(e,1,Zo,!0),Bi(t,2))}),vs=Er(function(e){var t=ko(e);return t="function"==typeof t?t:ie,Dr(In(e,1,Zo,!0),ie,t)}),ys=Er(function(e,t){return Zo(e)?mn(e,t):[]}),ms=Er(function(e){return qr(p(e,Zo))}),_s=Er(function(e){var t=ko(e);return Zo(t)&&(t=ie),qr(p(e,Zo),Bi(t,2))}),ws=Er(function(e){var t=ko(e);return t="function"==typeof t?t:ie,qr(p(e,Zo),ie,t)}),Cs=Er(Wo),bs=Er(function(e){var t=e.length,n=t>1?e[t-1]:ie;return n="function"==typeof n?(e.pop(),n):ie,jo(e,n)}),xs=Pi(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(t){return ln(t,e)};return!(t>1||this.__actions__.length)&&r instanceof w&&ro(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:zo,args:[o],thisArg:ie}),new i(r,this.__chain__).thru(function(e){return t&&!e.length&&e.push(ie),e})):this.thru(o)}),Ss=li(function(e,t,n){Ba.call(e,n)?++e[n]:cn(e,n,1)}),Es=_i(Ro),Rs=_i(Io),Is=li(function(e,t,n){Ba.call(e,n)?e[n].push(t):cn(e,n,[t])}),As=Er(function(e,t,n){var r=-1,i="function"==typeof t,o=Jo(e)?ka(e.length):[];return qu(e,function(e){o[++r]=i?u(t,e,n):er(e,t,n)}),o}),Os=li(function(e,t,n){cn(e,n,t)}),ks=li(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),Ts=Er(function(e,t){if(null==e)return[];var n=t.length;return n>1&&io(e,t[0],t[1])?t=[]:n>2&&io(t[0],t[1],t[2])&&(t=[t[0]]),vr(e,In(t,1),[])}),Ls=lu||function(){return Ln.Date.now()},Ws=Er(function(e,t,n){var r=ve;if(n.length){var i=J(n,$i(Ws));r|=Ce}return Li(e,r,t,n,i)}),js=Er(function(e,t,n){var r=ve|ye;if(n.length){var i=J(n,$i(js));r|=Ce}return Li(t,r,e,n,i)}),Ms=Er(function(e,t){return yn(e,1,t)}),zs=Er(function(e,t,n){return yn(e,la(t)||0,n)});Ho.Cache=te;var Ds=Ju(function(e,t){var n=(t=1==t.length&&Bs(t[0])?g(t[0],M(Bi())):g(In(t,1),M(Bi()))).length;return Er(function(r){for(var i=-1,o=wu(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return u(e,this,r)})}),Fs=Er(function(e,t){var n=J(t,$i(Fs));return Li(e,Ce,ie,t,n)}),Ps=Er(function(e,t){var n=J(t,$i(Ps));return Li(e,be,ie,t,n)}),Ns=Pi(function(e,t){return Li(e,Se,ie,ie,ie,t)}),Us=Ai(Bn),qs=Ai(function(e,t){return e>=t}),$s=tr(function(){return arguments}())?tr:function(e){return ta(e)&&Ba.call(e,"callee")&&!ru.call(e,"callee")},Bs=ka.isArray,Hs=Fn?M(Fn):function(e){return ta(e)&&Dn(e)==ut},Vs=gu||Oa,Gs=Pn?M(Pn):function(e){return ta(e)&&Dn(e)==Be},Js=Nn?M(Nn):function(e){return ta(e)&&es(e)==Ze},Zs=Un?M(Un):function(e){return ta(e)&&Dn(e)==et},Ks=qn?M(qn):function(e){return ta(e)&&es(e)==tt},Ys=$n?M($n):function(e){return ta(e)&&Xo(e.length)&&!!bn[Dn(e)]},Qs=Ai(cr),Xs=Ai(function(e,t){return e<=t}),ec=fi(function(e,t){if(co(t)||Jo(t))ui(t,ga(t),e);else for(var n in t)Ba.call(t,n)&&rn(e,n,t[n])}),tc=fi(function(e,t){ui(t,va(t),e)}),nc=fi(function(e,t,n,r){ui(t,va(t),e,r)}),rc=fi(function(e,t,n,r){ui(t,ga(t),e,r)}),ic=Pi(ln),oc=Er(function(e){return e.push(ie,Wi),u(nc,ie,e)}),ac=Er(function(e){return e.push(ie,ji),u(fc,ie,e)}),uc=bi(function(e,t,n){e[t]=n},ba(xa)),sc=bi(function(e,t,n){Ba.call(e,t)?e[t].push(n):e[t]=[n]},Bi),cc=Er(er),lc=fi(function(e,t,n){hr(e,t,n)}),fc=fi(function(e,t,n,r){hr(e,t,n,r)}),pc=Pi(function(e,t){var n={};if(null==e)return n;var r=!1;t=g(t,function(t){return t=Vr(t,e),r||(r=t.length>1),t}),ui(e,Ui(e),n),r&&(n=pn(n,fe|pe|he,Mi));for(var i=t.length;i--;)Fr(n,t[i]);return n}),hc=Pi(function(e,t){return null==e?{}:yr(e,t)}),dc=Ti(ga),gc=Ti(va),vc=vi(function(e,t,n){return t=t.toLowerCase(),e+(n?_a(t):t)}),yc=vi(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),mc=vi(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),_c=gi("toLowerCase"),wc=vi(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Cc=vi(function(e,t,n){return e+(n?" ":"")+xc(t)}),bc=vi(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),xc=gi("toUpperCase"),Sc=Er(function(e,t){try{return u(e,ie,t)}catch(e){return Ko(e)?e:new La(e)}}),Ec=Pi(function(e,t){return c(t,function(t){t=bo(t),cn(e,t,Ws(e[t],e))}),e}),Rc=wi(),Ic=wi(!0),Ac=Er(function(e,t){return function(n){return er(n,e,t)}}),Oc=Er(function(e,t){return function(n){return er(e,n,t)}}),kc=Si(g),Tc=Si(f),Lc=Si(_),Wc=Ii(),jc=Ii(!0),Mc=xi(function(e,t){return e+t},0),zc=ki("ceil"),Dc=xi(function(e,t){return e/t},1),Fc=ki("floor"),Pc=xi(function(e,t){return e*t},1),Nc=ki("round"),Uc=xi(function(e,t){return e-t},0);return n.after=function(e,t){if("function"!=typeof t)throw new Fa(ue);return e=sa(e),function(){if(--e<1)return t.apply(this,arguments)}},n.ary=No,n.assign=ec,n.assignIn=tc,n.assignInWith=nc,n.assignWith=rc,n.at=ic,n.before=Uo,n.bind=Ws,n.bindAll=Ec,n.bindKey=js,n.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Bs(e)?e:[e]},n.chain=Mo,n.chunk=function(e,t,n){t=(n?io(e,t,n):t===ie)?1:_u(sa(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var i=0,o=0,a=ka(pu(r/t));i<r;)a[o++]=kr(e,i,i+=t);return a},n.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},n.concat=function(){var e=arguments.length;if(!e)return[];for(var t=ka(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return v(Bs(n)?ai(n):[n],In(t,1))},n.cond=function(e){var t=null==e?0:e.length,n=Bi();return e=t?g(e,function(e){if("function"!=typeof e[1])throw new Fa(ue);return[n(e[0]),e[1]]}):[],Er(function(n){for(var r=-1;++r<t;){var i=e[r];if(u(i[0],this,n))return u(i[1],this,n)}})},n.conforms=function(e){return hn(pn(e,fe))},n.constant=ba,n.countBy=Ss,n.create=function(e,t){var n=Uu(e);return null==t?n:un(n,t)},n.curry=qo,n.curryRight=$o,n.debounce=Bo,n.defaults=oc,n.defaultsDeep=ac,n.defer=Ms,n.delay=zs,n.difference=as,n.differenceBy=us,n.differenceWith=ss,n.drop=function(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===ie?1:sa(t),kr(e,t<0?0:t,r)):[]},n.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===ie?1:sa(t),t=r-t,kr(e,0,t<0?0:t)):[]},n.dropRightWhile=function(e,t){return e&&e.length?Nr(e,Bi(t,3),!0,!0):[]},n.dropWhile=function(e,t){return e&&e.length?Nr(e,Bi(t,3),!0):[]},n.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&io(e,t,n)&&(n=0,r=i),En(e,t,n,r)):[]},n.filter=function(e,t){return(Bs(e)?p:Rn)(e,Bi(t,3))},n.flatMap=function(e,t){return In(Po(e,t),1)},n.flatMapDeep=function(e,t){return In(Po(e,t),Le)},n.flatMapDepth=function(e,t,n){return n=n===ie?1:sa(n),In(Po(e,t),n)},n.flatten=Ao,n.flattenDeep=function(e){return(null==e?0:e.length)?In(e,Le):[]},n.flattenDepth=function(e,t){return(null==e?0:e.length)?(t=t===ie?1:sa(t),In(e,t)):[]},n.flip=function(e){return Li(e,Ee)},n.flow=Rc,n.flowRight=Ic,n.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},n.functions=function(e){return null==e?[]:Wn(e,ga(e))},n.functionsIn=function(e){return null==e?[]:Wn(e,va(e))},n.groupBy=Is,n.initial=function(e){return(null==e?0:e.length)?kr(e,0,-1):[]},n.intersection=cs,n.intersectionBy=ls,n.intersectionWith=fs,n.invert=uc,n.invertBy=sc,n.invokeMap=As,n.iteratee=Sa,n.keyBy=Os,n.keys=ga,n.keysIn=va,n.map=Po,n.mapKeys=function(e,t){var n={};return t=Bi(t,3),kn(e,function(e,r,i){cn(n,t(e,r,i),e)}),n},n.mapValues=function(e,t){var n={};return t=Bi(t,3),kn(e,function(e,r,i){cn(n,r,t(e,r,i))}),n},n.matches=function(e){return fr(pn(e,fe))},n.matchesProperty=function(e,t){return pr(e,pn(t,fe))},n.memoize=Ho,n.merge=lc,n.mergeWith=fc,n.method=Ac,n.methodOf=Oc,n.mixin=Ea,n.negate=Vo,n.nthArg=function(e){return e=sa(e),Er(function(t){return gr(t,e)})},n.omit=pc,n.omitBy=function(e,t){return ya(e,Vo(Bi(t)))},n.once=function(e){return Uo(2,e)},n.orderBy=function(e,t,n,r){return null==e?[]:(Bs(t)||(t=null==t?[]:[t]),n=r?ie:n,Bs(n)||(n=null==n?[]:[n]),vr(e,t,n))},n.over=kc,n.overArgs=Ds,n.overEvery=Tc,n.overSome=Lc,n.partial=Fs,n.partialRight=Ps,n.partition=ks,n.pick=hc,n.pickBy=ya,n.property=Ia,n.propertyOf=function(e){return function(t){return null==e?ie:jn(e,t)}},n.pull=ps,n.pullAll=To,n.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?wr(e,t,Bi(n,2)):e},n.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?wr(e,t,ie,n):e},n.pullAt=hs,n.range=Wc,n.rangeRight=jc,n.rearg=Ns,n.reject=function(e,t){return(Bs(e)?p:Rn)(e,Vo(Bi(t,3)))},n.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=Bi(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return Cr(e,i),n},n.rest=function(e,t){if("function"!=typeof e)throw new Fa(ue);return t=t===ie?t:sa(t),Er(e,t)},n.reverse=Lo,n.sampleSize=function(e,t,n){return t=(n?io(e,t,n):t===ie)?1:sa(t),(Bs(e)?en:Ir)(e,t)},n.set=function(e,t,n){return null==e?e:Ar(e,t,n)},n.setWith=function(e,t,n,r){return r="function"==typeof r?r:ie,null==e?e:Ar(e,t,n,r)},n.shuffle=function(e){return(Bs(e)?tn:Or)(e)},n.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&io(e,t,n)?(t=0,n=r):(t=null==t?0:sa(t),n=n===ie?r:sa(n)),kr(e,t,n)):[]},n.sortBy=Ts,n.sortedUniq=function(e){return e&&e.length?jr(e):[]},n.sortedUniqBy=function(e,t){return e&&e.length?jr(e,Bi(t,2)):[]},n.split=function(e,t,n){return n&&"number"!=typeof n&&io(e,t,n)&&(t=n=ie),(n=n===ie?ze:n>>>0)?(e=pa(e))&&("string"==typeof t||null!=t&&!Zs(t))&&!(t=zr(t))&&$(e)?Gr(ee(e),0,n):e.split(t,n):[]},n.spread=function(e,t){if("function"!=typeof e)throw new Fa(ue);return t=null==t?0:_u(sa(t),0),Er(function(n){var r=n[t],i=Gr(n,0,t);return r&&v(i,r),u(e,this,i)})},n.tail=function(e){var t=null==e?0:e.length;return t?kr(e,1,t):[]},n.take=function(e,t,n){return e&&e.length?(t=n||t===ie?1:sa(t),kr(e,0,t<0?0:t)):[]},n.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===ie?1:sa(t),t=r-t,kr(e,t<0?0:t,r)):[]},n.takeRightWhile=function(e,t){return e&&e.length?Nr(e,Bi(t,3),!1,!0):[]},n.takeWhile=function(e,t){return e&&e.length?Nr(e,Bi(t,3)):[]},n.tap=function(e,t){return t(e),e},n.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Fa(ue);return ea(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Bo(e,t,{leading:r,maxWait:t,trailing:i})},n.thru=zo,n.toArray=aa,n.toPairs=dc,n.toPairsIn=gc,n.toPath=function(e){return Bs(e)?g(e,bo):oa(e)?[e]:ai(os(pa(e)))},n.toPlainObject=fa,n.transform=function(e,t,n){var r=Bs(e),i=r||Vs(e)||Ys(e);if(t=Bi(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:ea(e)&&Yo(o)?Uu(tu(e)):{}}return(i?c:kn)(e,function(e,r,i){return t(n,e,r,i)}),n},n.unary=function(e){return No(e,1)},n.union=ds,n.unionBy=gs,n.unionWith=vs,n.uniq=function(e){return e&&e.length?Dr(e):[]},n.uniqBy=function(e,t){return e&&e.length?Dr(e,Bi(t,2)):[]},n.uniqWith=function(e,t){return t="function"==typeof t?t:ie,e&&e.length?Dr(e,ie,t):[]},n.unset=function(e,t){return null==e||Fr(e,t)},n.unzip=Wo,n.unzipWith=jo,n.update=function(e,t,n){return null==e?e:Pr(e,t,Hr(n))},n.updateWith=function(e,t,n,r){return r="function"==typeof r?r:ie,null==e?e:Pr(e,t,Hr(n),r)},n.values=ma,n.valuesIn=function(e){return null==e?[]:z(e,va(e))},n.without=ys,n.words=Ca,n.wrap=function(e,t){return Fs(Hr(t),e)},n.xor=ms,n.xorBy=_s,n.xorWith=ws,n.zip=Cs,n.zipObject=function(e,t){return $r(e||[],t||[],rn)},n.zipObjectDeep=function(e,t){return $r(e||[],t||[],Ar)},n.zipWith=bs,n.entries=dc,n.entriesIn=gc,n.extend=tc,n.extendWith=nc,Ea(n,n),n.add=Mc,n.attempt=Sc,n.camelCase=vc,n.capitalize=_a,n.ceil=zc,n.clamp=function(e,t,n){return n===ie&&(n=t,t=ie),n!==ie&&(n=(n=la(n))===n?n:0),t!==ie&&(t=(t=la(t))===t?t:0),fn(la(e),t,n)},n.clone=function(e){return pn(e,he)},n.cloneDeep=function(e){return pn(e,fe|he)},n.cloneDeepWith=function(e,t){return t="function"==typeof t?t:ie,pn(e,fe|he,t)},n.cloneWith=function(e,t){return t="function"==typeof t?t:ie,pn(e,he,t)},n.conformsTo=function(e,t){return null==t||vn(e,t,ga(t))},n.deburr=wa,n.defaultTo=function(e,t){return null==e||e!==e?t:e},n.divide=Dc,n.endsWith=function(e,t,n){e=pa(e),t=zr(t);var r=e.length,i=n=n===ie?r:fn(sa(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},n.eq=Go,n.escape=function(e){return(e=pa(e))&&St.test(e)?e.replace(bt,Vn):e},n.escapeRegExp=function(e){return(e=pa(e))&&Wt.test(e)?e.replace(Lt,"\\$&"):e},n.every=function(e,t,n){var r=Bs(e)?f:_n;return n&&io(e,t,n)&&(t=ie),r(e,Bi(t,3))},n.find=Es,n.findIndex=Ro,n.findKey=function(e,t){return b(e,Bi(t,3),kn)},n.findLast=Rs,n.findLastIndex=Io,n.findLastKey=function(e,t){return b(e,Bi(t,3),Tn)},n.floor=Fc,n.forEach=Do,n.forEachRight=Fo,n.forIn=function(e,t){return null==e?e:Bu(e,Bi(t,3),va)},n.forInRight=function(e,t){return null==e?e:Hu(e,Bi(t,3),va)},n.forOwn=function(e,t){return e&&kn(e,Bi(t,3))},n.forOwnRight=function(e,t){return e&&Tn(e,Bi(t,3))},n.get=ha,n.gt=Us,n.gte=qs,n.has=function(e,t){return null!=e&&Yi(e,t,Zn)},n.hasIn=da,n.head=Oo,n.identity=xa,n.includes=function(e,t,n,r){e=Jo(e)?e:ma(e),n=n&&!r?sa(n):0;var i=e.length;return n<0&&(n=_u(i+n,0)),ia(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&S(e,t,n)>-1},n.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:sa(n);return i<0&&(i=_u(r+i,0)),S(e,t,i)},n.inRange=function(e,t,n){return t=ua(t),n===ie?(n=t,t=0):n=ua(n),e=la(e),Yn(e,t,n)},n.invoke=cc,n.isArguments=$s,n.isArray=Bs,n.isArrayBuffer=Hs,n.isArrayLike=Jo,n.isArrayLikeObject=Zo,n.isBoolean=function(e){return!0===e||!1===e||ta(e)&&Dn(e)==$e},n.isBuffer=Vs,n.isDate=Gs,n.isElement=function(e){return ta(e)&&1===e.nodeType&&!ra(e)},n.isEmpty=function(e){if(null==e)return!0;if(Jo(e)&&(Bs(e)||"string"==typeof e||"function"==typeof e.splice||Vs(e)||Ys(e)||$s(e)))return!e.length;var t=es(e);if(t==Ze||t==tt)return!e.size;if(co(e))return!ur(e).length;for(var n in e)if(Ba.call(e,n))return!1;return!0},n.isEqual=function(e,t){return nr(e,t)},n.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:ie)?n(e,t):ie;return r===ie?nr(e,t,ie,n):!!r},n.isError=Ko,n.isFinite=function(e){return"number"==typeof e&&vu(e)},n.isFunction=Yo,n.isInteger=Qo,n.isLength=Xo,n.isMap=Js,n.isMatch=function(e,t){return e===t||ir(e,t,Vi(t))},n.isMatchWith=function(e,t,n){return n="function"==typeof n?n:ie,ir(e,t,Vi(t),n)},n.isNaN=function(e){return na(e)&&e!=+e},n.isNative=function(e){if(ts(e))throw new La(ae);return or(e)},n.isNil=function(e){return null==e},n.isNull=function(e){return null===e},n.isNumber=na,n.isObject=ea,n.isObjectLike=ta,n.isPlainObject=ra,n.isRegExp=Zs,n.isSafeInteger=function(e){return Qo(e)&&e>=-We&&e<=We},n.isSet=Ks,n.isString=ia,n.isSymbol=oa,n.isTypedArray=Ys,n.isUndefined=function(e){return e===ie},n.isWeakMap=function(e){return ta(e)&&es(e)==ot},n.isWeakSet=function(e){return ta(e)&&Dn(e)==at},n.join=function(e,t){return null==e?"":yu.call(e,t)},n.kebabCase=yc,n.last=ko,n.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return n!==ie&&(i=(i=sa(n))<0?_u(r+i,0):wu(i,r-1)),t===t?Q(e,t,i):x(e,R,i,!0)},n.lowerCase=mc,n.lowerFirst=_c,n.lt=Qs,n.lte=Xs,n.max=function(e){return e&&e.length?Sn(e,xa,Bn):ie},n.maxBy=function(e,t){return e&&e.length?Sn(e,Bi(t,2),Bn):ie},n.mean=function(e){return I(e,xa)},n.meanBy=function(e,t){return I(e,Bi(t,2))},n.min=function(e){return e&&e.length?Sn(e,xa,cr):ie},n.minBy=function(e,t){return e&&e.length?Sn(e,Bi(t,2),cr):ie},n.stubArray=Aa,n.stubFalse=Oa,n.stubObject=function(){return{}},n.stubString=function(){return""},n.stubTrue=function(){return!0},n.multiply=Pc,n.nth=function(e,t){return e&&e.length?gr(e,sa(t)):ie},n.noConflict=function(){return Ln._===this&&(Ln._=Za),this},n.noop=Ra,n.now=Ls,n.pad=function(e,t,n){e=pa(e);var r=(t=sa(t))?X(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Ei(hu(i),n)+e+Ei(pu(i),n)},n.padEnd=function(e,t,n){e=pa(e);var r=(t=sa(t))?X(e):0;return t&&r<t?e+Ei(t-r,n):e},n.padStart=function(e,t,n){e=pa(e);var r=(t=sa(t))?X(e):0;return t&&r<t?Ei(t-r,n)+e:e},n.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),bu(pa(e).replace(Mt,""),t||0)},n.random=function(e,t,n){if(n&&"boolean"!=typeof n&&io(e,t,n)&&(t=n=ie),n===ie&&("boolean"==typeof t?(n=t,t=ie):"boolean"==typeof e&&(n=e,e=ie)),e===ie&&t===ie?(e=0,t=1):(e=ua(e),t===ie?(t=e,e=0):t=ua(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=xu();return wu(e+i*(t-e+An("1e-"+((i+"").length-1))),t)}return br(e,t)},n.reduce=function(e,t,n){var r=Bs(e)?y:k,i=arguments.length<3;return r(e,Bi(t,4),n,i,qu)},n.reduceRight=function(e,t,n){var r=Bs(e)?m:k,i=arguments.length<3;return r(e,Bi(t,4),n,i,$u)},n.repeat=function(e,t,n){return t=(n?io(e,t,n):t===ie)?1:sa(t),Sr(pa(e),t)},n.replace=function(){var e=arguments,t=pa(e[0]);return e.length<3?t:t.replace(e[1],e[2])},n.result=function(e,t,n){var r=-1,i=(t=Vr(t,e)).length;for(i||(i=1,e=ie);++r<i;){var o=null==e?ie:e[bo(t[r])];o===ie&&(r=i,o=n),e=Yo(o)?o.call(e):o}return e},n.round=Nc,n.runInContext=e,n.sample=function(e){return(Bs(e)?Xt:Rr)(e)},n.size=function(e){if(null==e)return 0;if(Jo(e))return ia(e)?X(e):e.length;var t=es(e);return t==Ze||t==tt?e.size:ur(e).length},n.snakeCase=wc,n.some=function(e,t,n){var r=Bs(e)?_:Tr;return n&&io(e,t,n)&&(t=ie),r(e,Bi(t,3))},n.sortedIndex=function(e,t){return Lr(e,t)},n.sortedIndexBy=function(e,t,n){return Wr(e,t,Bi(n,2))},n.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=Lr(e,t);if(r<n&&Go(e[r],t))return r}return-1},n.sortedLastIndex=function(e,t){return Lr(e,t,!0)},n.sortedLastIndexBy=function(e,t,n){return Wr(e,t,Bi(n,2),!0)},n.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=Lr(e,t,!0)-1;if(Go(e[n],t))return n}return-1},n.startCase=Cc,n.startsWith=function(e,t,n){return e=pa(e),n=null==n?0:fn(sa(n),0,e.length),t=zr(t),e.slice(n,n+t.length)==t},n.subtract=Uc,n.sum=function(e){return e&&e.length?L(e,xa):0},n.sumBy=function(e,t){return e&&e.length?L(e,Bi(t,2)):0},n.template=function(e,t,r){var i=n.templateSettings;r&&io(e,t,r)&&(t=ie),e=pa(e),t=nc({},t,i,Wi);var o,a,u=nc({},t.imports,i.imports,Wi),s=ga(u),c=z(u,s),l=0,f=t.interpolate||Kt,p="__p += '",h=za((t.escape||Kt).source+"|"+f.source+"|"+(f===It?qt:Kt).source+"|"+(t.evaluate||Kt).source+"|$","g"),d="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Cn+"]")+"\n";e.replace(h,function(t,n,r,i,u,s){return r||(r=i),p+=e.slice(l,s).replace(Yt,U),n&&(o=!0,p+="' +\n__e("+n+") +\n'"),u&&(a=!0,p+="';\n"+u+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=s+t.length,t}),p+="';\n";var g=t.variable;g||(p="with (obj) {\n"+p+"\n}\n"),p=(a?p.replace(mt,""):p).replace(_t,"$1").replace(wt,"$1;"),p="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var v=Sc(function(){return Wa(s,d+"return "+p).apply(ie,c)});if(v.source=p,Ko(v))throw v;return v},n.times=function(e,t){if((e=sa(e))<1||e>We)return[];var n=ze,r=wu(e,ze);t=Bi(t),e-=ze;for(var i=W(r,t);++n<e;)t(n);return i},n.toFinite=ua,n.toInteger=sa,n.toLength=ca,n.toLower=function(e){return pa(e).toLowerCase()},n.toNumber=la,n.toSafeInteger=function(e){return e?fn(sa(e),-We,We):0===e?e:0},n.toString=pa,n.toUpper=function(e){return pa(e).toUpperCase()},n.trim=function(e,t,n){if((e=pa(e))&&(n||t===ie))return e.replace(jt,"");if(!e||!(t=zr(t)))return e;var r=ee(e),i=ee(t);return Gr(r,F(r,i),P(r,i)+1).join("")},n.trimEnd=function(e,t,n){if((e=pa(e))&&(n||t===ie))return e.replace(zt,"");if(!e||!(t=zr(t)))return e;var r=ee(e);return Gr(r,0,P(r,ee(t))+1).join("")},n.trimStart=function(e,t,n){if((e=pa(e))&&(n||t===ie))return e.replace(Mt,"");if(!e||!(t=zr(t)))return e;var r=ee(e);return Gr(r,F(r,ee(t))).join("")},n.truncate=function(e,t){var n=Re,r=Ie;if(ea(t)){var i="separator"in t?t.separator:i;n="length"in t?sa(t.length):n,r="omission"in t?zr(t.omission):r}var o=(e=pa(e)).length;if($(e)){var a=ee(e);o=a.length}if(n>=o)return e;var u=n-X(r);if(u<1)return r;var s=a?Gr(a,0,u).join(""):e.slice(0,u);if(i===ie)return s+r;if(a&&(u+=s.length-u),Zs(i)){if(e.slice(u).search(i)){var c,l=s;for(i.global||(i=za(i.source,pa($t.exec(i))+"g")),i.lastIndex=0;c=i.exec(l);)var f=c.index;s=s.slice(0,f===ie?u:f)}}else if(e.indexOf(zr(i),u)!=u){var p=s.lastIndexOf(i);p>-1&&(s=s.slice(0,p))}return s+r},n.unescape=function(e){return(e=pa(e))&&xt.test(e)?e.replace(Ct,Gn):e},n.uniqueId=function(e){var t=++Ha;return pa(e)+t},n.upperCase=bc,n.upperFirst=xc,n.each=Do,n.eachRight=Fo,n.first=Oo,Ea(n,function(){var e={};return kn(n,function(t,r){Ba.call(n.prototype,r)||(e[r]=t)}),e}(),{chain:!1}),n.VERSION="4.17.4",c(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){n[e].placeholder=n}),c(["drop","take"],function(e,t){w.prototype[e]=function(n){n=n===ie?1:_u(sa(n),0);var r=this.__filtered__&&!t?new w(this):this.clone();return r.__filtered__?r.__takeCount__=wu(n,r.__takeCount__):r.__views__.push({size:wu(n,ze),type:e+(r.__dir__<0?"Right":"")}),r},w.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),c(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n==ke||3==n;w.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Bi(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),c(["head","last"],function(e,t){var n="take"+(t?"Right":"");w.prototype[e]=function(){return this[n](1).value()[0]}}),c(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");w.prototype[e]=function(){return this.__filtered__?new w(this):this[n](1)}}),w.prototype.compact=function(){return this.filter(xa)},w.prototype.find=function(e){return this.filter(e).head()},w.prototype.findLast=function(e){return this.reverse().find(e)},w.prototype.invokeMap=Er(function(e,t){return"function"==typeof e?new w(this):this.map(function(n){return er(n,e,t)})}),w.prototype.reject=function(e){return this.filter(Vo(Bi(e)))},w.prototype.slice=function(e,t){e=sa(e);var n=this;return n.__filtered__&&(e>0||t<0)?new w(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==ie&&(n=(t=sa(t))<0?n.dropRight(-t):n.take(t-e)),n)},w.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},w.prototype.toArray=function(){return this.take(ze)},kn(w.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),a=n[o?"take"+("last"==t?"Right":""):t],u=o||/^find/.test(t);a&&(n.prototype[t]=function(){var t=this.__wrapped__,s=o?[1]:arguments,c=t instanceof w,l=s[0],f=c||Bs(t),p=function(e){var t=a.apply(n,v([e],s));return o&&h?t[0]:t};f&&r&&"function"==typeof l&&1!=l.length&&(c=f=!1);var h=this.__chain__,d=!!this.__actions__.length,g=u&&!h,y=c&&!d;if(!u&&f){t=y?t:new w(this);var m=e.apply(t,s);return m.__actions__.push({func:zo,args:[p],thisArg:ie}),new i(m,h)}return g&&y?e.apply(this,s):(m=this.thru(p),g?o?m.value()[0]:m.value():m)})}),c(["pop","push","shift","sort","splice","unshift"],function(e){var t=Pa[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);n.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var n=this.value();return t.apply(Bs(n)?n:[],e)}return this[r](function(n){return t.apply(Bs(n)?n:[],e)})}}),kn(w.prototype,function(e,t){var r=n[t];if(r){var i=r.name+"";(Lu[i]||(Lu[i]=[])).push({name:t,func:r})}}),Lu[Ci(ie,ye).name]=[{name:"wrapper",func:ie}],w.prototype.clone=function(){var e=new w(this.__wrapped__);return e.__actions__=ai(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=ai(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=ai(this.__views__),e},w.prototype.reverse=function(){if(this.__filtered__){var e=new w(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},w.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Bs(e),r=t<0,i=n?e.length:0,o=Zi(0,i,this.__views__),a=o.start,u=o.end,s=u-a,c=r?u:a-1,l=this.__iteratees__,f=l.length,p=0,h=wu(s,this.__takeCount__);if(!n||!r&&i==s&&h==s)return Ur(e,this.__actions__);var d=[];e:for(;s--&&p<h;){for(var g=-1,v=e[c+=t];++g<f;){var y=l[g],m=y.iteratee,_=y.type,w=m(v);if(_==Te)v=w;else if(!w){if(_==ke)continue e;break e}}d[p++]=v}return d},n.prototype.at=xs,n.prototype.chain=function(){return Mo(this)},n.prototype.commit=function(){return new i(this.value(),this.__chain__)},n.prototype.next=function(){this.__values__===ie&&(this.__values__=aa(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?ie:this.__values__[this.__index__++]}},n.prototype.plant=function(e){for(var t,n=this;n instanceof r;){var i=Eo(n);i.__index__=0,i.__values__=ie,t?o.__wrapped__=i:t=i;var o=i;n=n.__wrapped__}return o.__wrapped__=e,t},n.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof w){var t=e;return this.__actions__.length&&(t=new w(this)),(t=t.reverse()).__actions__.push({func:zo,args:[Lo],thisArg:ie}),new i(t,this.__chain__)}return this.thru(Lo)},n.prototype.toJSON=n.prototype.valueOf=n.prototype.value=function(){return Ur(this.__wrapped__,this.__actions__)},n.prototype.first=n.prototype.head,au&&(n.prototype[au]=function(){return this}),n}();Ln._=Jn,(i=function(){return Jn}.call(t,n,t,r))!==ie&&(r.exports=i)}).call(this)}).call(t,n(23),n(138)(e))},2316:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2317);t.getDefaultRetryStrategy=function(e){var t=(void 0===e?{}:e).timeoutBetweenRetries;return{conditions:[r.shouldRetryOnReloadEvent,r.shouldRetryOnNoSkypeId,r.shouldRetryOnDormant,r.shouldRetryNotExceededAttempts],timeoutBetweenRetries:t||0,recreateTimeout:18e4,maxRecreateAttempts:3}},t.getLinearNetworkErrorRetry=function(e){var t=(void 0===e?{}:e).timeoutBetweenRetries;return{conditions:[r.shouldRetryOnReloadEvent,r.shouldRetryOnNoSkypeId,r.shouldRetryOnDormant,r.shouldRetryOnNetworkError,r.shouldRetryOnNavigateError,r.shouldRetryNotExceededAttempts],timeoutBetweenRetries:t||2e4,recreateTimeout:18e4,maxRecreateAttempts:3}}},2317:function(e,t,n){"use strict";function r(e){var n=this,r=e.logger,i=e.appStateService,o=e.eventingService,s=e.constants,c=e.timeoutBetweenRetries,l=e.scenario;return r.info("Are we connected? "+i.isConnected),new Promise(function(e){return a(n,void 0,void 0,function(){var n;return u(this,function(a){switch(a.label){case 0:return i.isConnected?[4,t.wait(c,r)]:[3,2];case 1:return a.sent(),e(),[2];case 2:return l.pause({reason:"no network"}),n=o.unsafeOn(s.events.appState.changed,function(){i.isConnected&&(l.resume(),r.info("App state updated. We are now connected."),n(),e())}),[2]}})})})}function i(e,t){return e>=t}function o(e,t){return Object.defineProperty(t,"name",{value:e})}var a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{s(r.next(e))}catch(e){o(e)}}function u(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,u)}s((r=r.apply(e,t||[])).next())})},u=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=2&n[0]?o.return:n[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,o=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){s=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){s.label=n[1];break}if(6===n[0]&&s.label<a[1]){s.label=a[1],a=n;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(n);break}a[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(e){n=[6,e],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,u,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return u={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u},s=this;Object.defineProperty(t,"__esModule",{value:!0}),t.wait=function(e,t){return t.info("Starting to wait for "+e+"ms."),new Promise(function(n){setTimeout(function(){t.info("Done waiting for "+e+"."),n()},e)})},t.shouldRetryOnReloadEvent=o("shouldRetryOnReloadEvent",function(e){var t=e.event,n=e.logger;return a(s,void 0,void 0,function(){return u(this,function(e){return"reloaded"===t.reason?(n.info("Attempting to recreate the experience container after unloading."),[2,{shouldRetry:!0,resetRetryCountAfterRetry:!0}]):[2,{shouldRetry:!1}]})})}),t.shouldRetryOnNoSkypeId=o("shouldRetryOnNoSkypeId",function(e){var n=e.event,r=e.logger,o=e.timeoutBetweenRetries,c=e.retries,l=e.maxRecreateAttempts;return a(s,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return i(c,l)||"no-skype-id"!==n.reason?[3,2]:[4,t.wait(o,r)];case 1:return e.sent(),[2,{shouldRetry:!0}];case 2:return[2,{shouldRetry:!1}]}})})}),t.shouldRetryOnDormant=o("shouldRetryOnDormant",function(e){var t=e.timeElapsed,n=e.recreateTimeout,r=e.logger;return a(s,void 0,void 0,function(){return u(this,function(e){return t>n?(r.info("Attempting to recreate the experience container because the last attempt was made "+t+" ms ago, which is beyond the recreate limit time window: "+n+" ms."),[2,{shouldRetry:!0,resetRetryCountAfterRetry:!0}]):[2,{shouldRetry:!1}]})})}),t.shouldRetryOnNetworkError=o("shouldRetryOnNetworkError",function(e){return a(s,void 0,void 0,function(){var t,n,o,a,s,c;return u(this,function(u){switch(u.label){case 0:return t=e.event,n=e.logger,o=e.resetRetriesOnce,a=e.retries,s=e.maxRecreateAttempts,"failed-to-load"!==t.reason&&"failed-to-load-chunk"!==t.reason?[3,2]:(o(),i(a,s)?[3,2]:(c=t.data&&t.data.statusCode,n.info(t.reason+" - recreating experience container. Status code: "+c),[4,r(e)]));case 1:return u.sent(),[2,{shouldRetry:!0}];case 2:return[2,{shouldRetry:!1}]}})})}),t.shouldRetryOnNavigateError=o("shouldRetryOnNavigateError",function(e){return a(s,void 0,void 0,function(){var n,r,o,a,s,c,l;return u(this,function(u){switch(u.label){case 0:return n=e.event,r=e.logger,o=e.resetRetriesOnce,a=e.retries,s=e.timeoutBetweenRetries,c=e.maxRecreateAttempts,"failed-to-navigate"!==n.reason?[3,2]:(o(),i(a,c)?[3,2]:(l=n.data&&n.data.statusCode,r.info("failed-to-navigate - recreating experience container. Status code: "+l),[4,t.wait(s,r)]));case 1:return u.sent(),[2,{shouldRetry:!0}];case 2:return[2,{shouldRetry:!1}]}})})}),t.shouldRetryNotExceededAttempts=o("shouldRetryNotExceededAttempts",function(e){var n=e.logger,r=e.retries,o=e.timeoutBetweenRetries,c=e.maxRecreateAttempts;return a(s,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return i(r,c)?[3,2]:(n.info("Attempting to recreate the experience container. Attempt #"+r+"."),[4,t.wait(o,n)]);case 1:return e.sent(),[2,{shouldRetry:!0}];case 2:return[2,{shouldRetry:!1}]}})})})},2318:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(20),o=n(2319),a=function(e){function t(t,n,r,i,o){var a=e.call(this,t)||this;return a.experienceContainerManager=i,a.experienceContainerFeatureService=o,a.isHidden=!0,a.logger=r.newLogger(""+n.experienceContainers.log.prefix+a.mtmaTelemetryIdentifier()),a.initializeOnAppLaunchAndReinit("constructor"),a}return r(t,e),t.$inject=["orchestrationService","constants","loggingService","experienceContainerManager","experienceContainerFeatureService"],Object.defineProperty(t.prototype,"experienceContainer",{get:function(){return this.experienceContainerManager.get()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"experienceUiWrap",{get:function(){return this.experienceContainerManager.getUiHandle()},enumerable:!0,configurable:!0}),t.prototype.initializeOnAppLaunchAndReinit=function(e){var t=this;this.logger.log("initializeOnAppLaunchAndReinit, reason: "+e),this.experienceContainerFeatureService.isHybridAppExperienceContainerEnabled()&&(this.resizeObserver=new ResizeObserver(function(e){if(!t.isHidden){var n=e[0].contentRect;t.resizeUtil.setSize(n);var r=t.resizeUtil.getElementStyle(performance.now());$(t.experienceUiWrap).css(r)}}),this.resizeUtil=new o.HybridAppResizeUtil)},t.prototype.mtmaTelemetryIdentifier=function(){return"HybridAppService"},t.prototype.cleanupOnAppTeardown=function(e){this.logger.log("cleanupOnAppTeardown, reason: "+e),this.resizeUtil=void 0,this.resizeSampleElement=void 0,this.isHidden=!0,this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=void 0)},Object.defineProperty(t.prototype,"isReady",{get:function(){return this.experienceContainerManager.isReady},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"retryState",{get:function(){return this.experienceContainerManager.retryState},enumerable:!0,configurable:!0}),t.prototype.onReady=function(e){return this.experienceContainerManager.onReady(e)},t.prototype.collectLogs=function(){return this.experienceContainerManager.collectLogs()},t.prototype.collectLeaks=function(){return this.experienceContainerManager.collectLeaks()},t.prototype.setSettings=function(e){this.sendMessage(e)},t.prototype.setTheme=function(e){this.sendMessage({hostSettings:{theme:e}})},t.prototype.setAppState=function(e){this.sendMessage({hostSettings:{appState:e}})},t.prototype.setLocale=function(e){this.sendMessage({hostSettings:{localeCode:e}})},t.prototype.nudge=function(){this.experienceContainerManager.nudge()},t.prototype.sendCommand=function(e){var t={eventId:"executeEntityCommand",payload:{entity:e.entity,entityOptions:e.entityOptions,command:e.command}};return this.experienceContainer.sendCommand(t)},t.prototype.showOnElement=function(e){if(!this.isEnabled())throw teamspace.services.commanding.EntityCommandErrorCode.ExperienceContainerNotEnabled;this.isHidden=!1,this.experienceUiWrap.setAttribute("class","visible overlay"),this.experienceContainer&&this.experienceContainer.focus(),this.resizeSampleElement&&this.resizeSampleElement===e||(this.resizeSampleElement&&this.resizeObserver&&this.resizeObserver.disconnect(),this.resizeSampleElement=e,e&&this.resizeObserver&&this.resizeObserver.observe(e))},t.prototype.hide=function(){this.resizeSampleElement=void 0,this.isHidden=!0,this.experienceUiWrap.setAttribute("class","hidden"),this.resizeObserver&&this.resizeObserver.disconnect()},t.prototype.shouldShowChatNotification=function(e){return this.experienceContainerManager.shouldShowChatNotification(e)},t.prototype.isEnabled=function(){return this.experienceContainer&&this.experienceContainerFeatureService.isExperienceContainerSupportEnabled()},t.prototype.sendMessage=function(e){if(this.experienceContainer){var t={eventId:i.ChildWindowEventRequest.UpdateWindowState,payload:e};this.experienceContainer.sendCommand(t)}},t}(teamspace.services.MTMABase);t.HybridAppService=a,angular.module("teamspace.hybridAppServiceLazy",["teamspace.constants","teamspace.loggingService","teamspace.orchestrationService","teamspace.experienceContainerManager","teamspace.experienceContainerFeatureService"]).service("hybridAppServiceLazy",a)},2319:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.lastResizeTimestamp=0,this.RESIZE_INTERVAL=16.67}return e.prototype.setSize=function(e){this.height=e.height,this.width=e.width},e.prototype.getElementStyle=function(e){var t=this.getSize(),n=t.width,r=t.height,i=this.lastSetHeight!==n||this.lastSetWidth!==r,o=e-this.lastResizeTimestamp,a="transform 16.67ms ease-in-out, width 16.67ms ease-in-out, height 16.67ms ease-in-out";return i?o>=this.RESIZE_INTERVAL?(this.lastSetHeight=r,this.lastSetWidth=n,this.lastResizeTimestamp=e,{transition:a,transform:"none",width:[n,"px"].join(""),height:[r,"px"].join("")}):{transition:a,transform:"scale("+n/this.lastSetWidth+","+r/this.lastSetHeight+")"}:{transition:a,transform:"none"}},e.prototype.getSize=function(){return{width:this.width,height:this.height}},e}();t.HybridAppResizeUtil=r},234:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(20),o=n(2308),a=3e4,u=[i.CommandEvent.Failure],s=[i.CommandEvent.AlreadyRendered,i.CommandEvent.Close,i.CommandEvent.CommandReportingTimedOut,i.CommandEvent.Flushed,i.CommandEvent.Focus,i.CommandEvent.Incomplete,i.CommandEvent.NotHandled,i.CommandEvent.Rendered],c=s.slice(),l=function(e){function t(t,n,r,o,l){var f=e.call(this,t)||this;return f.logger=t,f.elementId=n,f.params=r,f.constants=o,f.$window=l,f.sendCommand=function(e){return new Promise(function(t,n){try{f._sendCommand(e)}catch(t){f.logger.error("sendCommand() failed - elementId={0}: {1}",f.elementId,t),n({cmd:e,error:t,reason:teamspace.services.commanding.EntityCommandErrorCode.SendCommandException})}if(e.payload&&e.payload.command&&e.payload.command.correlation&&e.payload.command.correlation.id){var r=!1,o=!1;f.logger.log("experienceContainer entity command sent: "+JSON.stringify(e.payload));var l=f.logger.service.findScenarioByNameAndId(f.constants.multiWindow.scenario.enqueueEntityCommand,e.payload.command.correlation.id);if(l){var p=teamspace.services.commanding.EntityCommandStep.CommandSent;l.mark(p),l.appendEventData({previousStep:p})}var h=function(a){var l=a.entityCommand,p=a.commandEvent,d=l.command.correlation.id;if(e.payload.command.correlation.id===d)if(d){f.logger.log("CommandEvent Received, correlationId: "+d+", commandEvent: "+p);var g=f.logger.service.findScenarioByNameAndId(f.constants.multiWindow.scenario.enqueueEntityCommand,d);g&&(g.mark(p),g.appendEventData({previousStep:p})),c.includes(p)&&!o&&(f.logger.log("Resolving enqueueEntityCommand promise, correlationId: "+d+", reason: "+p),t(),o=!0),s.includes(p)&&!r&&(f.logger.log("Stopping enqueueEntityCommand scenario, correlationId: "+d+", reason: "+p),g&&g.stop({reason:p}),r=!0),u.includes(p)&&(f.logger.error("Failing enqueueEntityCommand promise, correlationId: "+d+", reason: "+p),n(teamspace.services.commanding.EntityCommandErrorCode.SendCommandFailure),f.removeEventListener(i.ChildWindowEventRequest.CommandEvent,h))}else f.logger.error("CommandEvent Received without a valid correlation id, entityCommand: "+l)};f.addEventListener(i.ChildWindowEventRequest.CommandEvent,h),f.$window.setTimeout(function(){f.removeEventListener(i.ChildWindowEventRequest.CommandEvent,h),n(teamspace.services.commanding.EntityCommandErrorCode.TimeoutWaitingForCompletion)},a)}else t()})},f.element=f.createElement(r.url),f}return r(t,e),t.prototype.appendTo=function(e){if(this.element)try{return e.appendChild(this.element),Promise.resolve()}catch(e){return this.logger.error("appendChild() failed - elementId={0}: {1}",this.elementId,e),Promise.reject(this.constants.experienceContainers.reason.ecAppendToError)}return Promise.reject(this.constants.experienceContainers.reason.ecAppendToNoElement)},t.prototype.focus=function(){this.element&&this.element.focus()},t}(o.EventPublisher);t.ExperienceContainer=l},57:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.createDiv=function(e){return this.createElement("div",e)},e.prototype.createWebView=function(e){return this.createElement("webview",e)},e.prototype.createIframe=function(e){return this.createElement("iframe",e)},e.prototype.createElement=function(e,t){var n=document.createElement(e);return n.id=t,n},e}();t.htmlFactory=new r}},[2305]);